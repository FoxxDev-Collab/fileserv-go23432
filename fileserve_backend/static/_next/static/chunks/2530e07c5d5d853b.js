(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";e.s(["AlertTriangle",()=>t.default]);var t=e.i(82458)},73884,e=>{"use strict";e.s(["XCircle",()=>t],73884);let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},23750,10708,e=>{"use strict";e.s(["Input",()=>a],23750);var t=e.i(18050),s=e.i(47163);function a(e){let{className:a,type:l,...n}=e;return(0,t.jsx)("input",{type:l,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...n})}e.s(["Label",()=>i],10708);var l=e.i(71645),n=e.i(48425),r=l.forwardRef((e,s)=>(0,t.jsx)(n.Primitive.label,{...e,ref:s,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function i(e){let{className:a,...l}=e;return(0,t.jsx)(r,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...l})}r.displayName="Label"},99682,e=>{"use strict";e.s(["usePrevious",()=>s]);var t=e.i(71645);function s(e){let s=t.useRef({value:e,previous:e});return t.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}},30374,e=>{"use strict";e.s(["Dialog",()=>n,"DialogContent",()=>o,"DialogDescription",()=>x,"DialogFooter",()=>u,"DialogHeader",()=>d,"DialogTitle",()=>h,"DialogTrigger",()=>r],30374);var t=e.i(18050),s=e.i(26999),a=e.i(41947),a=a,l=e.i(47163);function n(e){let{...a}=e;return(0,t.jsx)(s.Root,{"data-slot":"dialog",...a})}function r(e){let{...a}=e;return(0,t.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...a})}function i(e){let{...a}=e;return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...a})}function c(e){let{className:a,...n}=e;return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...n})}function o(e){let{className:n,children:r,showCloseButton:o=!0,...d}=e;return(0,t.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,t.jsx)(c,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...d,children:[r,o&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(a.default,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function d(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function u(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function h(e){let{className:a,...n}=e;return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",a),...n})}function x(e){let{className:a,...n}=e;return(0,t.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",a),...n})}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},19036,e=>{"use strict";e.s(["Switch",()=>N],19036);var t=e.i(18050),s=e.i(71645),a=e.i(81140),l=e.i(20783),n=e.i(69340),r=e.i(99682),i=e.i(35804);e.i(74080);var c=Symbol("radix.slottable");function o(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let n=function(e){let a=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...n}=e;if(s.isValidElement(a)){var r,i,c;let e,o,d=(o=(e=null==(i=Object.getOwnPropertyDescriptor((r=a).props,"ref"))?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning)?r.ref:(o=(e=null==(c=Object.getOwnPropertyDescriptor(r,"ref"))?void 0:c.get)&&"isReactWarning"in e&&e.isReactWarning)?r.props.ref:r.props.ref||r.ref,u=function(e,t){let s={...t};for(let a in t){let l=e[a],n=t[a];/^on[A-Z]/.test(a)?l&&n?s[a]=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let a=n(...t);return l(...t),a}:l&&(s[a]=l):"style"===a?s[a]={...l,...n}:"className"===a&&(s[a]=[l,n].filter(Boolean).join(" "))}return{...e,...s}}(n,a.props);return a.type!==s.Fragment&&(u.ref=t?(0,l.composeRefs)(t,d):d),s.cloneElement(a,u)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),n=s.forwardRef((e,l)=>{let{children:n,...r}=e,i=s.Children.toArray(n),c=i.find(o);if(c){let e=c.props.children,n=i.map(t=>t!==c?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(a,{...r,ref:l,children:s.isValidElement(e)?s.cloneElement(e,void 0,n):null})}return(0,t.jsx)(a,{...r,ref:l,children:n})});return n.displayName="".concat(e,".Slot"),n}("Primitive.".concat(a)),r=s.forwardRef((e,s)=>{let{asChild:l,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?n:a,{...r,ref:s})});return r.displayName="Primitive.".concat(a),{...e,[a]:r}},{}),u="Switch",[h,x]=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=[],n=()=>{let t=l.map(e=>s.createContext(e));return function(a){let l=(null==a?void 0:a[e])||t;return s.useMemo(()=>({["__scope".concat(e)]:{...a,[e]:l}}),[a,l])}};return n.scopeName=e,[function(a,n){let r=s.createContext(n),i=l.length;l=[...l,n];let c=a=>{var l;let{scope:n,children:c,...o}=a,d=(null==n||null==(l=n[e])?void 0:l[i])||r,u=s.useMemo(()=>o,Object.values(o));return(0,t.jsx)(d.Provider,{value:u,children:c})};return c.displayName=a+"Provider",[c,function(t,l){var c;let o=(null==l||null==(c=l[e])?void 0:c[i])||r,d=s.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error("`".concat(t,"` must be used within `").concat(a,"`"))}]},function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let l=t[0];if(1===t.length)return l;let n=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let a=e.reduce((e,s)=>{let{useScope:a,scopeName:l}=s,n=a(t)["__scope".concat(l)];return{...e,...n}},{});return s.useMemo(()=>({["__scope".concat(l.scopeName)]:a}),[a])}};return n.scopeName=l.scopeName,n}(n,...a)]}(u),[m,p]=h(u),f=s.forwardRef((e,r)=>{let{__scopeSwitch:i,name:c,checked:o,defaultChecked:h,required:x,disabled:p,value:f="on",onCheckedChange:j,form:g,...v}=e,[N,C]=s.useState(null),w=(0,l.useComposedRefs)(r,e=>C(e)),S=s.useRef(!1),k=!N||g||!!N.closest("form"),[T,P]=(0,n.useControllableState)({prop:o,defaultProp:null!=h&&h,onChange:j,caller:u});return(0,t.jsxs)(m,{scope:i,checked:T,disabled:p,children:[(0,t.jsx)(d.button,{type:"button",role:"switch","aria-checked":T,"aria-required":x,"data-state":b(T),"data-disabled":p?"":void 0,disabled:p,value:f,...v,ref:w,onClick:(0,a.composeEventHandlers)(e.onClick,e=>{P(e=>!e),k&&(S.current=e.isPropagationStopped(),S.current||e.stopPropagation())})}),k&&(0,t.jsx)(y,{control:N,bubbles:!S.current,name:c,value:f,checked:T,required:x,disabled:p,form:g,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var j="SwitchThumb",g=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...l}=e,n=p(j,a);return(0,t.jsx)(d.span,{"data-state":b(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:s})});g.displayName=j;var y=s.forwardRef((e,a)=>{let{__scopeSwitch:n,control:c,checked:o,bubbles:d=!0,...u}=e,h=s.useRef(null),x=(0,l.useComposedRefs)(h,a),m=(0,r.usePrevious)(o),p=(0,i.useSize)(c);return s.useEffect(()=>{let e=h.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==o&&t){let s=new Event("click",{bubbles:d});t.call(e,o),e.dispatchEvent(s)}},[m,o,d]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...u,tabIndex:-1,ref:x,style:{...u.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var v=e.i(47163);function N(e){let{className:s,...a}=e;return(0,t.jsx)(f,{"data-slot":"switch",className:(0,v.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:(0,v.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},23585,e=>{"use strict";e.s(["MoreVertical",()=>t],23585);let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},84765,e=>{"use strict";e.s(["Settings2",()=>t],84765);let t=(0,e.i(75254).default)("settings-2",[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]])},26267,e=>{"use strict";e.s(["default",()=>z],26267);var t=e.i(18050),s=e.i(71645),a=e.i(18566),l=e.i(49786),n=e.i(81868),r=e.i(70065),i=e.i(94179),c=e.i(67881),o=e.i(23750),d=e.i(10708),u=e.i(62870),h=e.i(19036),x=e.i(91432),m=e.i(54858);e.i(73827);var p=e.i(59467),f=e.i(46696),j=e.i(47627),g=e.i(30374),y=e.i(63415),b=e.i(3116),v=e.i(75254);let N=(0,v.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var C=e.i(16715),w=e.i(7233),S=e.i(27612),k=e.i(31343),T=e.i(95242),P=e.i(23585),D=e.i(68553),R=e.i(69638),M=e.i(73884),H=e.i(78894),I=e.i(31278);let E=(0,v.default)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var F=e.i(84765);function A(e){return e?new Date(e).toLocaleString():"Never"}function z(){let e=(0,a.useRouter)(),{user:v,isAuthenticated:z,isLoading:B}=(0,x.useAuth)(),[_,L]=(0,s.useState)([]),[O,V]=(0,s.useState)([]),[W,q]=(0,s.useState)(null),[Z,U]=(0,s.useState)(!0),[X,G]=(0,s.useState)(!1),[K,Y]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)(null),[ea,el]=(0,s.useState)([]),[en,er]=(0,s.useState)(!1),[ei,ec]=(0,s.useState)(""),[eo,ed]=(0,s.useState)(""),[eu,eh]=(0,s.useState)("daily"),[ex,em]=(0,s.useState)("7"),[ep,ef]=(0,s.useState)("auto"),[ej,eg]=(0,s.useState)(!1),[ey,eb]=(0,s.useState)(!0),[ev,eN]=(0,s.useState)(!1);(0,s.useEffect)(()=>{B||z||e.push("/login")},[B,z,e]),(0,s.useEffect)(()=>{z&&(null==v?void 0:v.role)==="admin"&&eC()},[z,v]);let eC=async()=>{try{let[e,t,s]=await Promise.all([m.zfsAPI.listSnapshotPolicies(),m.zfsAPI.listDatasets(),m.zfsAPI.getSchedulerStatus()]);e&&L(e),t&&V(t),s&&q(s)}catch(e){console.error("Failed to load data:",e),f.toast.error("Failed to load snapshot policies")}finally{U(!1),G(!1)}},ew=async()=>{if(!ei||!eo)return void f.toast.error("Name and dataset are required");eN(!0);try{await m.zfsAPI.createSnapshotPolicy({name:ei,dataset:eo,schedule:eu,retention:parseInt(ex)||7,prefix:ep||"auto",recursive:ej,enabled:ey}),f.toast.success("Snapshot policy created"),Y(!1),eD(),eC()}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to create policy")}finally{eN(!1)}},eS=async()=>{if(et){eN(!0);try{await m.zfsAPI.deleteSnapshotPolicy(et.id),f.toast.success("Policy deleted"),Q(!1),es(null),eC()}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to delete policy")}finally{eN(!1)}}},ek=async e=>{try{await m.zfsAPI.updateSnapshotPolicy(e.id,{enabled:!e.enabled}),f.toast.success(e.enabled?"Policy disabled":"Policy enabled"),eC()}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to update policy")}},eT=async e=>{try{f.toast.info("Running snapshot policy..."),await m.zfsAPI.runSnapshotPolicy(e.id),f.toast.success("Snapshot created successfully"),eC()}catch(e){f.toast.error(e instanceof Error?e.message:"Failed to run policy")}},eP=async e=>{es(e),ee(!0),er(!0);try{let t=await m.zfsAPI.getSnapshotPolicySnapshots(e.id);t&&el(t)}catch(e){f.toast.error("Failed to load snapshots")}finally{er(!1)}},eD=()=>{ec(""),ed(""),eh("daily"),em("7"),ef("auto"),eg(!1),eb(!0)};return B||Z?(0,t.jsx)(p.PageSkeleton,{}):(null==v?void 0:v.role)!=="admin"?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)(r.Card,{className:"w-96",children:(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Access Denied"}),(0,t.jsx)(r.CardDescription,{children:"You need administrator privileges to access this page."})]})})}):(0,t.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,t.jsx)(n.Sidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(l.Header,{}),(0,t.jsx)("main",{className:"flex-1 p-6 overflow-auto",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Snapshot Scheduling"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Automate ZFS snapshots with configurable retention policies"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{G(!0),eC()},disabled:X,children:[(0,t.jsx)(C.RefreshCw,{className:"h-4 w-4 mr-2 ".concat(X?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)(c.Button,{onClick:()=>Y(!0),children:[(0,t.jsx)(w.Plus,{className:"h-4 w-4 mr-2"}),"New Policy"]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Scheduler Status"}),(0,t.jsx)(F.Settings2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(null==W?void 0:W.running)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-green-600",children:"Running"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.XCircle,{className:"h-5 w-5 text-red-500"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-red-600",children:"Stopped"})]})})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Policies"}),(0,t.jsx)(D.Camera,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==W?void 0:W.total_policies)||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"snapshot policies configured"})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Active Policies"}),(0,t.jsx)(k.Play,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(r.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(null==W?void 0:W.enabled_policies)||0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"policies currently enabled"})]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Snapshot Policies"}),(0,t.jsx)(r.CardDescription,{children:"Configure automated snapshot schedules for your ZFS datasets"})]}),(0,t.jsx)(r.CardContent,{children:0===_.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(D.Camera,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"No snapshot policies configured"}),(0,t.jsx)("p",{className:"text-sm",children:"Create a policy to automate ZFS snapshots"}),(0,t.jsxs)(c.Button,{className:"mt-4",onClick:()=>Y(!0),children:[(0,t.jsx)(w.Plus,{className:"h-4 w-4 mr-2"}),"Create First Policy"]})]}):(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableHead,{children:"Name"}),(0,t.jsx)(j.TableHead,{children:"Dataset"}),(0,t.jsx)(j.TableHead,{children:"Schedule"}),(0,t.jsx)(j.TableHead,{children:"Retention"}),(0,t.jsx)(j.TableHead,{children:"Snapshots"}),(0,t.jsx)(j.TableHead,{children:"Last Run"}),(0,t.jsx)(j.TableHead,{children:"Next Run"}),(0,t.jsx)(j.TableHead,{children:"Status"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(j.TableBody,{children:_.map(e=>(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(j.TableCell,{className:"font-mono text-sm",children:e.dataset}),(0,t.jsx)(j.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[function(e){switch(e){case"hourly":default:return(0,t.jsx)(b.Clock,{className:"h-4 w-4"});case"daily":case"weekly":case"monthly":return(0,t.jsx)(N,{className:"h-4 w-4"})}}(e.schedule),(0,t.jsx)("span",{className:"capitalize",children:e.schedule})]})}),(0,t.jsxs)(j.TableCell,{children:[e.retention," snapshots"]}),(0,t.jsx)(j.TableCell,{children:(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",className:"h-auto p-1",onClick:()=>eP(e),children:[(0,t.jsx)(E,{className:"h-4 w-4 mr-1"}),e.snapshot_count]})}),(0,t.jsx)(j.TableCell,{className:"text-sm",children:A(e.last_run)}),(0,t.jsx)(j.TableCell,{className:"text-sm",children:A(e.next_run)}),(0,t.jsx)(j.TableCell,{children:e.last_error?(0,t.jsxs)(i.Badge,{variant:"destructive",className:"gap-1",children:[(0,t.jsx)(H.AlertTriangle,{className:"h-3 w-3"}),"Error"]}):e.enabled?(0,t.jsxs)(i.Badge,{variant:"default",className:"gap-1 bg-green-600",children:[(0,t.jsx)(R.CheckCircle,{className:"h-3 w-3"}),"Active"]}):(0,t.jsxs)(i.Badge,{variant:"secondary",className:"gap-1",children:[(0,t.jsx)(T.Pause,{className:"h-3 w-3"}),"Paused"]})}),(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsxs)(y.DropdownMenu,{children:[(0,t.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(P.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>eT(e),children:[(0,t.jsx)(k.Play,{className:"h-4 w-4 mr-2"}),"Run Now"]}),(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>eP(e),children:[(0,t.jsx)(E,{className:"h-4 w-4 mr-2"}),"View Snapshots"]}),(0,t.jsx)(y.DropdownMenuItem,{onClick:()=>ek(e),children:e.enabled?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Pause,{className:"h-4 w-4 mr-2"}),"Disable"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Play,{className:"h-4 w-4 mr-2"}),"Enable"]})}),(0,t.jsx)(y.DropdownMenuSeparator,{}),(0,t.jsxs)(y.DropdownMenuItem,{className:"text-red-600",onClick:()=>{es(e),Q(!0)},children:[(0,t.jsx)(S.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id))})]})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsx)(r.CardTitle,{children:"Schedule Reference"}),(0,t.jsx)(r.CardDescription,{children:"Understanding snapshot schedules and retention"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(b.Clock,{className:"h-5 w-5 text-blue-500"}),(0,t.jsx)("span",{className:"font-medium",children:"Hourly"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Creates a snapshot every hour at :00. Good for frequently changing data."})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(N,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{className:"font-medium",children:"Daily"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Creates a snapshot every day at midnight. Recommended for most use cases."})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(N,{className:"h-5 w-5 text-orange-500"}),(0,t.jsx)("span",{className:"font-medium",children:"Weekly"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Creates a snapshot every Sunday at midnight. Good for archival purposes."})]}),(0,t.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(N,{className:"h-5 w-5 text-purple-500"}),(0,t.jsx)("span",{className:"font-medium",children:"Monthly"})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Creates a snapshot on the 1st of each month. Best for long-term retention."})]})]})})]})]})})]}),(0,t.jsx)(g.Dialog,{open:K,onOpenChange:Y,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Create Snapshot Policy"}),(0,t.jsx)(g.DialogDescription,{children:"Configure an automated snapshot schedule for a ZFS dataset"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"name",children:"Policy Name"}),(0,t.jsx)(o.Input,{id:"name",placeholder:"e.g., daily-backups",value:ei,onChange:e=>ec(e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"dataset",children:"Dataset"}),(0,t.jsxs)(u.Select,{value:eo,onValueChange:ed,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Select a dataset"})}),(0,t.jsx)(u.SelectContent,{children:O.map(e=>(0,t.jsx)(u.SelectItem,{value:e.name,children:e.name},e.name))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"schedule",children:"Schedule"}),(0,t.jsxs)(u.Select,{value:eu,onValueChange:eh,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"hourly",children:"Hourly"}),(0,t.jsx)(u.SelectItem,{value:"daily",children:"Daily"}),(0,t.jsx)(u.SelectItem,{value:"weekly",children:"Weekly"}),(0,t.jsx)(u.SelectItem,{value:"monthly",children:"Monthly"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:function(e){switch(e){case"hourly":return"Every hour at :00";case"daily":return"Every day at 00:00";case"weekly":return"Every Sunday at 00:00";case"monthly":return"1st of each month at 00:00";default:return e}}(eu)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"retention",children:"Retention (snapshots to keep)"}),(0,t.jsx)(o.Input,{id:"retention",type:"number",min:"1",max:"1000",value:ex,onChange:e=>em(e.target.value)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Older snapshots will be automatically deleted"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(d.Label,{htmlFor:"prefix",children:"Snapshot Prefix"}),(0,t.jsx)(o.Input,{id:"prefix",placeholder:"auto",value:ep,onChange:e=>ef(e.target.value)}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Snapshots will be named: ",ep||"auto","-",eu,"-TIMESTAMP"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d.Label,{children:"Recursive Snapshots"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include all child datasets"})]}),(0,t.jsx)(h.Switch,{checked:ej,onCheckedChange:eg})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(d.Label,{children:"Enable Policy"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start scheduling immediately"})]}),(0,t.jsx)(h.Switch,{checked:ey,onCheckedChange:eb})]})]}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),(0,t.jsxs)(c.Button,{onClick:ew,disabled:ev,children:[ev&&(0,t.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Create Policy"]})]})]})}),(0,t.jsx)(g.Dialog,{open:J,onOpenChange:Q,children:(0,t.jsxs)(g.DialogContent,{children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Delete Snapshot Policy"}),(0,t.jsxs)(g.DialogDescription,{children:['Are you sure you want to delete the policy "',null==et?void 0:et.name,'"? This will stop automatic snapshots but will not delete existing snapshots.']})]}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>Q(!1),children:"Cancel"}),(0,t.jsxs)(c.Button,{variant:"destructive",onClick:eS,disabled:ev,children:[ev&&(0,t.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Delete Policy"]})]})]})}),(0,t.jsx)(g.Dialog,{open:$,onOpenChange:ee,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(g.DialogHeader,{children:[(0,t.jsx)(g.DialogTitle,{children:"Policy Snapshots"}),(0,t.jsxs)(g.DialogDescription,{children:['Snapshots created by policy "',null==et?void 0:et.name,'"']})]}),(0,t.jsx)("div",{className:"py-4",children:en?(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)(I.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===ea.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(D.Camera,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No snapshots created by this policy yet"})]}):(0,t.jsx)("div",{className:"max-h-96 overflow-auto",children:(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableHead,{children:"Snapshot Name"}),(0,t.jsx)(j.TableHead,{children:"Used"}),(0,t.jsx)(j.TableHead,{children:"Referenced"}),(0,t.jsx)(j.TableHead,{children:"Created"})]})}),(0,t.jsx)(j.TableBody,{children:ea.map(e=>(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableCell,{className:"font-mono text-sm",children:e.name}),(0,t.jsx)(j.TableCell,{children:e.used}),(0,t.jsx)(j.TableCell,{children:e.referenced}),(0,t.jsx)(j.TableCell,{children:e.creation})]},e.name))})]})})}),(0,t.jsx)(g.DialogFooter,{children:(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>ee(!1),children:"Close"})})]})})]})}}]);