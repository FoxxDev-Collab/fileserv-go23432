(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72520,e=>{"use strict";e.s(["ArrowRight",()=>t],72520);let t=(0,e.i(75254).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},18566,(e,t,r)=>{t.exports=e.r(76562)},69340,35804,e=>{"use strict";e.s(["useControllableState",()=>a],69340);var t=e.i(71645),r=e.i(34620);t[" useEffectEvent ".trim().toString()],t[" useInsertionEffect ".trim().toString()];var s=t[" useInsertionEffect ".trim().toString()]||r.useLayoutEffect;function a(e){let{prop:r,defaultProp:a,onChange:i=()=>{},caller:n}=e,[l,c,o]=function(e){let{defaultProp:r,onChange:a}=e,[i,n]=t.useState(r),l=t.useRef(i),c=t.useRef(a);return s(()=>{c.current=a},[a]),t.useEffect(()=>{if(l.current!==i){var e;null==(e=c.current)||e.call(c,i),l.current=i}},[i,l]),[i,n,c]}({defaultProp:a,onChange:i}),d=void 0!==r,u=d?r:l;{let e=t.useRef(void 0!==r);t.useEffect(()=>{let t=e.current;if(t!==d){let e=d?"controlled":"uncontrolled";console.warn("".concat(n," is changing from ").concat(t?"controlled":"uncontrolled"," to ").concat(e,". Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component."))}e.current=d},[d,n])}return[u,t.useCallback(e=>{if(d){let s="function"==typeof e?e(r):e;if(s!==r){var t;null==(t=o.current)||t.call(o,s)}}else c(e)},[d,r,c,o])]}function i(e){let[s,a]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){a({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,s;if(!Array.isArray(t)||!t.length)return;let i=t[0];if("borderBoxSize"in i){let e=i.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,s=t.blockSize}else r=e.offsetWidth,s=e.offsetHeight;a({width:r,height:s})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}a(void 0)},[e]),s}Symbol("RADIX:SYNC_STATE"),e.s(["useSize",()=>i],35804)},18393,e=>{"use strict";e.s(["Server",()=>t],18393);let t=(0,e.i(75254).default)("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]])},98919,e=>{"use strict";e.s(["Shield",()=>t],98919);let t=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},61911,e=>{"use strict";e.s(["Users",()=>t],61911);let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},52786,e=>{"use strict";e.s(["HardDrive",()=>t],52786);let t=(0,e.i(75254).default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]])},70065,e=>{"use strict";e.s(["Card",()=>s,"CardContent",()=>l,"CardDescription",()=>n,"CardFooter",()=>c,"CardHeader",()=>a,"CardTitle",()=>i]);var t=e.i(18050),r=e.i(47163);function s(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...a})}function a(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...a})}function i(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...a})}function n(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...a})}function l(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...a})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",s),...a})}},94179,e=>{"use strict";e.s(["Badge",()=>n]);var t=e.i(18050),r=e.i(91918),s=e.i(25913),a=e.i(47163);let i=(0,s.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:n,asChild:l=!1,...c}=e,o=l?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,a.cn)(i({variant:n}),s),...c})}},23750,10708,e=>{"use strict";e.s(["Input",()=>s],23750);var t=e.i(18050),r=e.i(47163);function s(e){let{className:s,type:a,...i}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}e.s(["Label",()=>l],10708);var a=e.i(71645),i=e.i(48425),n=a.forwardRef((e,r)=>(0,t.jsx)(i.Primitive.label,{...e,ref:r,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function l(e){let{className:s,...a}=e;return(0,t.jsx)(n,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}n.displayName="Label"},99682,e=>{"use strict";e.s(["usePrevious",()=>r]);var t=e.i(71645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},19036,e=>{"use strict";e.s(["Switch",()=>w],19036);var t=e.i(18050),r=e.i(71645),s=e.i(81140),a=e.i(20783),i=e.i(69340),n=e.i(99682),l=e.i(35804);e.i(74080);var c=Symbol("radix.slottable");function o(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=function(e){let s=function(e){let t=r.forwardRef((e,t)=>{let{children:s,...i}=e;if(r.isValidElement(s)){var n,l,c;let e,o,d=(o=(e=null==(l=Object.getOwnPropertyDescriptor((n=s).props,"ref"))?void 0:l.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(o=(e=null==(c=Object.getOwnPropertyDescriptor(n,"ref"))?void 0:c.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref,u=function(e,t){let r={...t};for(let s in t){let a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=i(...t);return a(...t),s}:a&&(r[s]=a):"style"===s?r[s]={...a,...i}:"className"===s&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}(i,s.props);return s.type!==r.Fragment&&(u.ref=t?(0,a.composeRefs)(t,d):d),r.cloneElement(s,u)}return r.Children.count(s)>1?r.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),i=r.forwardRef((e,a)=>{let{children:i,...n}=e,l=r.Children.toArray(i),c=l.find(o);if(c){let e=c.props.children,i=l.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...n,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,t.jsx)(s,{...n,ref:a,children:i})});return i.displayName="".concat(e,".Slot"),i}("Primitive.".concat(s)),n=r.forwardRef((e,r)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(a?i:s,{...n,ref:r})});return n.displayName="Primitive.".concat(s),{...e,[s]:n}},{}),u="Switch",[m,x]=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],i=()=>{let t=a.map(e=>r.createContext(e));return function(s){let a=(null==s?void 0:s[e])||t;return r.useMemo(()=>({["__scope".concat(e)]:{...s,[e]:a}}),[s,a])}};return i.scopeName=e,[function(s,i){let n=r.createContext(i),l=a.length;a=[...a,i];let c=s=>{var a;let{scope:i,children:c,...o}=s,d=(null==i||null==(a=i[e])?void 0:a[l])||n,u=r.useMemo(()=>o,Object.values(o));return(0,t.jsx)(d.Provider,{value:u,children:c})};return c.displayName=s+"Provider",[c,function(t,a){var c;let o=(null==a||null==(c=a[e])?void 0:c[l])||n,d=r.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error("`".concat(t,"` must be used within `").concat(s,"`"))}]},function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let a=t[0];if(1===t.length)return a;let i=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let s=e.reduce((e,r)=>{let{useScope:s,scopeName:a}=r,i=s(t)["__scope".concat(a)];return{...e,...i}},{});return r.useMemo(()=>({["__scope".concat(a.scopeName)]:s}),[s])}};return i.scopeName=a.scopeName,i}(i,...s)]}(u),[h,f]=m(u),p=r.forwardRef((e,n)=>{let{__scopeSwitch:l,name:c,checked:o,defaultChecked:m,required:x,disabled:f,value:p="on",onCheckedChange:v,form:g,...j}=e,[w,N]=r.useState(null),C=(0,a.useComposedRefs)(n,e=>N(e)),k=r.useRef(!1),S=!w||g||!!w.closest("form"),[A,R]=(0,i.useControllableState)({prop:o,defaultProp:null!=m&&m,onChange:v,caller:u});return(0,t.jsxs)(h,{scope:l,checked:A,disabled:f,children:[(0,t.jsx)(d.button,{type:"button",role:"switch","aria-checked":A,"aria-required":x,"data-state":b(A),"data-disabled":f?"":void 0,disabled:f,value:p,...j,ref:C,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{R(e=>!e),S&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),S&&(0,t.jsx)(y,{control:w,bubbles:!k.current,name:c,value:p,checked:A,required:x,disabled:f,form:g,style:{transform:"translateX(-100%)"}})]})});p.displayName=u;var v="SwitchThumb",g=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...a}=e,i=f(v,s);return(0,t.jsx)(d.span,{"data-state":b(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})});g.displayName=v;var y=r.forwardRef((e,s)=>{let{__scopeSwitch:i,control:c,checked:o,bubbles:d=!0,...u}=e,m=r.useRef(null),x=(0,a.useComposedRefs)(m,s),h=(0,n.usePrevious)(o),f=(0,l.useSize)(c);return r.useEffect(()=>{let e=m.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==o&&t){let r=new Event("click",{bubbles:d});t.call(e,o),e.dispatchEvent(r)}},[h,o,d]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...u,tabIndex:-1,ref:x,style:{...u.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var j=e.i(47163);function w(e){let{className:r,...s}=e;return(0,t.jsx)(p,{"data-slot":"switch",className:(0,j.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:(0,t.jsx)(g,{"data-slot":"switch-thumb",className:(0,j.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},71689,e=>{"use strict";e.s(["ArrowLeft",()=>t],71689);let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},81950,e=>{"use strict";e.s(["default",()=>j]);var t=e.i(18050),r=e.i(71645),s=e.i(18566),a=e.i(54858),i=e.i(67881),n=e.i(23750),l=e.i(10708),c=e.i(70065),o=e.i(19036),d=e.i(94179),u=e.i(46696),m=e.i(18393),x=e.i(98919),h=e.i(61911),f=e.i(3116),p=e.i(95468),v=e.i(31278),g=e.i(72520),y=e.i(71689),b=e.i(52786);function j(){let e=(0,s.useRouter)(),[j,w]=(0,r.useState)("welcome"),[N,C]=(0,r.useState)(!0),[k,S]=(0,r.useState)(!1),[A,R]=(0,r.useState)(!1),[E,P]=(0,r.useState)("FileServ"),[D,L]=(0,r.useState)(!0),[M,_]=(0,r.useState)(["sudo","wheel","admin","root"]),[z,B]=(0,r.useState)(""),[I,T]=(0,r.useState)(24);(0,r.useEffect)(()=>{(async()=>{try{(await a.setupAPI.getStatus()).setup_complete&&(R(!0),e.push("/login"))}catch(e){console.error("Failed to check setup status:",e)}finally{C(!1)}})()},[e]);let H=()=>{let e=z.trim();e&&!M.includes(e)&&(_([...M,e]),B(""))},F=async()=>{S(!0);try{await a.setupAPI.complete({server_name:E,admin_groups:M,use_pam:D,session_expiry_hours:I}),u.toast.success("Setup completed successfully!"),w("complete")}catch(e){console.error("Setup failed:",e),u.toast.error("Setup failed. Please try again.")}finally{S(!1)}},O=()=>{switch(j){case"welcome":w("server");break;case"server":w("auth");break;case"auth":F()}},U=()=>{switch(j){case"server":w("welcome");break;case"auth":w("server")}};return N?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted",children:(0,t.jsx)(v.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):A?null:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background to-muted p-4",children:(0,t.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,t.jsx)("div",{className:"flex justify-center mb-8",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:["welcome","server","auth","complete"].map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ".concat(j===e?"bg-primary text-primary-foreground":["welcome","server","auth","complete"].indexOf(j)>r?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"),children:r+1}),r<3&&(0,t.jsx)("div",{className:"w-8 h-0.5 ".concat(["welcome","server","auth","complete"].indexOf(j)>r?"bg-primary/40":"bg-muted")})]},e))})}),"welcome"===j&&(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(b.HardDrive,{className:"h-8 w-8 text-primary"})}),(0,t.jsx)(c.CardTitle,{className:"text-3xl",children:"Welcome to FileServ"}),(0,t.jsx)(c.CardDescription,{className:"text-lg",children:"Let's get your file server configured in just a few steps."})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(m.Server,{className:"h-5 w-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Server Configuration"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Name your server and configure basic settings"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(x.Shield,{className:"h-5 w-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"Automatic Security"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"A secure JWT secret will be automatically generated"})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(h.Users,{className:"h-5 w-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:"PAM Authentication"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Users authenticate with their Linux system credentials"})]})]})]}),(0,t.jsxs)(i.Button,{onClick:O,className:"w-full",size:"lg",children:["Get Started",(0,t.jsx)(g.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]}),"server"===j&&(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.Server,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(c.CardTitle,{children:"Server Configuration"})]}),(0,t.jsx)(c.CardDescription,{children:"Configure your server name and basic settings"})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"serverName",children:"Server Name"}),(0,t.jsx)(n.Input,{id:"serverName",value:E,onChange:e=>P(e.target.value),placeholder:"FileServ"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This name will be displayed in the web interface"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"sessionExpiry",children:"Session Duration (hours)"}),(0,t.jsx)(n.Input,{id:"sessionExpiry",type:"number",value:I,onChange:e=>T(parseInt(e.target.value)||24),min:1,max:168}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"How long users stay logged in (1-168 hours)"})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:U,children:[(0,t.jsx)(y.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsxs)(i.Button,{onClick:O,children:["Continue",(0,t.jsx)(g.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]})]}),"auth"===j&&(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.Shield,{className:"h-5 w-5 text-primary"}),(0,t.jsx)(c.CardTitle,{children:"Authentication Settings"})]}),(0,t.jsx)(c.CardDescription,{children:"Configure how users authenticate to the system"})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(l.Label,{htmlFor:"usePAM",className:"text-base",children:"Use PAM Authentication"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users log in with their Linux system credentials"})]}),(0,t.jsx)(o.Switch,{id:"usePAM",checked:D,onCheckedChange:L})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(l.Label,{children:"Admin Groups"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users in these system groups will have administrator privileges"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(n.Input,{value:z,onChange:e=>B(e.target.value),placeholder:"Add a group...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),H())}}),(0,t.jsx)(i.Button,{variant:"outline",onClick:H,children:"Add"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(e=>(0,t.jsxs)(d.Badge,{variant:"secondary",className:"cursor-pointer hover:bg-destructive hover:text-destructive-foreground",onClick:()=>{_(M.filter(t=>t!==e))},children:[e," Ã—"]},e))})]}),(0,t.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(f.Clock,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"font-medium",children:"Security Note"})]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:"A secure JWT secret will be automatically generated and stored in the database. You can regenerate it later from the admin settings page."})]}),(0,t.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,t.jsxs)(i.Button,{variant:"outline",onClick:U,children:[(0,t.jsx)(y.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back"]}),(0,t.jsx)(i.Button,{onClick:O,disabled:k,children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up..."]}):(0,t.jsxs)(t.Fragment,{children:["Complete Setup",(0,t.jsx)(p.CheckCircle2,{className:"ml-2 h-4 w-4"})]})})]})]})]}),"complete"===j&&(0,t.jsxs)(c.Card,{children:[(0,t.jsxs)(c.CardHeader,{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center",children:(0,t.jsx)(p.CheckCircle2,{className:"h-8 w-8 text-green-500"})}),(0,t.jsx)(c.CardTitle,{className:"text-3xl",children:"Setup Complete!"}),(0,t.jsx)(c.CardDescription,{className:"text-lg",children:"Your FileServ instance is ready to use."})]}),(0,t.jsxs)(c.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Server Name:"})," ",E]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Authentication:"})," ",D?"PAM (System Users)":"Internal"]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Admin Groups:"})," ",M.join(", ")]}),(0,t.jsxs)("p",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:"Session Duration:"})," ",I," hours"]})]}),(0,t.jsxs)("div",{className:"text-center text-sm text-muted-foreground",children:[(0,t.jsx)("p",{children:"Log in with your system credentials to get started."}),(0,t.jsx)("p",{children:"Users in the admin groups listed above will have full access."})]}),(0,t.jsxs)(i.Button,{onClick:()=>e.push("/login"),className:"w-full",size:"lg",children:["Go to Login",(0,t.jsx)(g.ArrowRight,{className:"ml-2 h-4 w-4"})]})]})]})]})})}}]);