(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54978,e=>{"use strict";e.s(["default",()=>er],54978);var t=e.i(18050),s=e.i(71645),a=e.i(18566),n=e.i(49786),i=e.i(81868),l=e.i(70065),r=e.i(94179),o=e.i(67881),c=e.i(30374),d=e.i(23750),u=e.i(10708),h=e.i(62870),x=e.i(47627),m=e.i(81140),p=e.i(69340),j=e.i(34620),g=e.i(20783);e.i(74080);var f=Symbol("radix.slottable");function v(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}var y=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let n=function(e){let a=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...n}=e;if(s.isValidElement(a)){var i,l,r;let e,o,c=(o=(e=null==(l=Object.getOwnPropertyDescriptor((i=a).props,"ref"))?void 0:l.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=null==(r=Object.getOwnPropertyDescriptor(i,"ref"))?void 0:r.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref,d=function(e,t){let s={...t};for(let a in t){let n=e[a],i=t[a];/^on[A-Z]/.test(a)?n&&i?s[a]=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let a=i(...t);return n(...t),a}:n&&(s[a]=n):"style"===a?s[a]={...n,...i}:"className"===a&&(s[a]=[n,i].filter(Boolean).join(" "))}return{...e,...s}}(n,a.props);return a.type!==s.Fragment&&(d.ref=t?(0,g.composeRefs)(t,c):c),s.cloneElement(a,d)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),n=s.forwardRef((e,n)=>{let{children:i,...l}=e,r=s.Children.toArray(i),o=r.find(v);if(o){let e=o.props.children,i=r.map(t=>t!==o?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(a,{...l,ref:n,children:s.isValidElement(e)?s.cloneElement(e,void 0,i):null})}return(0,t.jsx)(a,{...l,ref:n,children:i})});return n.displayName="".concat(e,".Slot"),n}("Primitive.".concat(a)),i=s.forwardRef((e,s)=>{let{asChild:i,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?n:a,{...l,ref:s})});return i.displayName="Primitive.".concat(a),{...e,[a]:i}},{}),b=e.i(96626),N=e.i(10772),C="Collapsible",[w,k]=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=()=>{let t=n.map(e=>s.createContext(e));return function(a){let n=(null==a?void 0:a[e])||t;return s.useMemo(()=>({["__scope".concat(e)]:{...a,[e]:n}}),[a,n])}};return i.scopeName=e,[function(a,i){let l=s.createContext(i),r=n.length;n=[...n,i];let o=a=>{var n;let{scope:i,children:o,...c}=a,d=(null==i||null==(n=i[e])?void 0:n[r])||l,u=s.useMemo(()=>c,Object.values(c));return(0,t.jsx)(d.Provider,{value:u,children:o})};return o.displayName=a+"Provider",[o,function(t,n){var o;let c=(null==n||null==(o=n[e])?void 0:o[r])||l,d=s.useContext(c);if(d)return d;if(void 0!==i)return i;throw Error("`".concat(t,"` must be used within `").concat(a,"`"))}]},function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let n=t[0];if(1===t.length)return n;let i=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let a=e.reduce((e,s)=>{let{useScope:a,scopeName:n}=s,i=a(t)["__scope".concat(n)];return{...e,...i}},{});return s.useMemo(()=>({["__scope".concat(n.scopeName)]:a}),[a])}};return i.scopeName=n.scopeName,i}(i,...a)]}(C),[D,T]=w(C),S=s.forwardRef((e,a)=>{let{__scopeCollapsible:n,open:i,defaultOpen:l,disabled:r,onOpenChange:o,...c}=e,[d,u]=(0,p.useControllableState)({prop:i,defaultProp:null!=l&&l,onChange:o,caller:C});return(0,t.jsx)(D,{scope:n,disabled:r,contentId:(0,N.useId)(),open:d,onOpenToggle:s.useCallback(()=>u(e=>!e),[u]),children:(0,t.jsx)(y.div,{"data-state":H(d),"data-disabled":r?"":void 0,...c,ref:a})})});S.displayName=C;var P="CollapsibleTrigger",B=s.forwardRef((e,s)=>{let{__scopeCollapsible:a,...n}=e,i=T(P,a);return(0,t.jsx)(y.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":H(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:s,onClick:(0,m.composeEventHandlers)(e.onClick,i.onOpenToggle)})});B.displayName=P;var A="CollapsibleContent",R=s.forwardRef((e,s)=>{let{forceMount:a,...n}=e,i=T(A,e.__scopeCollapsible);return(0,t.jsx)(b.Presence,{present:a||i.open,children:e=>{let{present:a}=e;return(0,t.jsx)(F,{...n,ref:s,present:a})}})});R.displayName=A;var F=s.forwardRef((e,a)=>{let{__scopeCollapsible:n,present:i,children:l,...r}=e,o=T(A,n),[c,d]=s.useState(i),u=s.useRef(null),h=(0,g.useComposedRefs)(a,u),x=s.useRef(0),m=x.current,p=s.useRef(0),f=p.current,v=o.open||c,b=s.useRef(v),N=s.useRef(void 0);return s.useEffect(()=>{let e=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,j.useLayoutEffect)(()=>{let e=u.current;if(e){N.current=N.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();x.current=t.height,p.current=t.width,b.current||(e.style.transitionDuration=N.current.transitionDuration,e.style.animationName=N.current.animationName),d(i)}},[o.open,i]),(0,t.jsx)(y.div,{"data-state":H(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...r,ref:h,style:{"--radix-collapsible-content-height":m?"".concat(m,"px"):void 0,"--radix-collapsible-content-width":f?"".concat(f,"px"):void 0,...e.style},children:v&&l})});function H(e){return e?"open":"closed"}function I(e){let{...s}=e;return(0,t.jsx)(S,{"data-slot":"collapsible",...s})}function M(e){let{...s}=e;return(0,t.jsx)(B,{"data-slot":"collapsible-trigger",...s})}function z(e){let{...s}=e;return(0,t.jsx)(R,{"data-slot":"collapsible-content",...s})}var _=e.i(91432),L=e.i(54858);e.i(73827);var O=e.i(59467),E=e.i(46696),V=e.i(52786),U=e.i(16715),W=e.i(64659),q=e.i(63059),G=e.i(69638),K=e.i(78894),X=e.i(7233),Z=e.i(27612),J=e.i(58041),Q=e.i(66992),Y=e.i(10059),$=e.i(75254);let ee=(0,$.default)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var et=e.i(67240),es=e.i(31343);let ea=(0,$.default)("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),en=(0,$.default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);var ei=e.i(30009),el=e.i(25959);function er(){var e,m,p,j,g,f,v,y;let b=(0,a.useRouter)(),{user:N,isAuthenticated:C,isLoading:w}=(0,_.useAuth)(),[k,D]=(0,s.useState)([]),[T,S]=(0,s.useState)(!0),[P,B]=(0,s.useState)(!1),[A,R]=(0,s.useState)(new Set),[F,H]=(0,s.useState)({open:!1}),[$,er]=(0,s.useState)({fstype:"ext4",label:"",force:!1}),[eo,ec]=(0,s.useState)(!1),[ed,eu]=(0,s.useState)({open:!1}),[eh,ex]=(0,s.useState)({tableType:"gpt"}),[em,ep]=(0,s.useState)(!1),[ej,eg]=(0,s.useState)({open:!1}),[ef,ev]=(0,s.useState)({start:"0%",end:"100%",fstype:"",label:""}),[ey,eb]=(0,s.useState)(!1),[eN,eC]=(0,s.useState)({open:!1}),[ew,ek]=(0,s.useState)(!1),[eD,eT]=(0,s.useState)({open:!1}),[eS,eP]=(0,s.useState)({mountPoint:"",persistent:!1}),[eB,eA]=(0,s.useState)(!1);(0,s.useEffect)(()=>{!w&&(C?N&&"admin"!==N.role&&b.replace("/dashboard"):b.replace("/"))},[w,C,N,b]);let eR=async()=>{try{let e=await L.storageAPI.getDisks();D(e),e.length>0&&0===A.size&&R(new Set([e[0].name]))}catch(e){console.error("Failed to fetch disks:",e),E.toast.error("Failed to fetch disk information")}finally{S(!1),B(!1)}};(0,s.useEffect)(()=>{C&&(null==N?void 0:N.role)==="admin"&&eR()},[C,N]);let eF=async()=>{if(F.partition){ec(!0);try{await L.storageAPI.formatPartition({device:F.partition.path,fstype:$.fstype,label:$.label||void 0,force:$.force}),E.toast.success("Partition formatted successfully"),H({open:!1}),eR()}catch(e){E.toast.error("Failed to format partition: ".concat(e))}finally{ec(!1)}}},eH=async()=>{if(ed.disk){ep(!0);try{await L.storageAPI.createPartitionTable({disk:ed.disk.path,table_type:eh.tableType}),E.toast.success("Disk initialized with ".concat(eh.tableType.toUpperCase()," partition table")),eu({open:!1}),eR()}catch(e){E.toast.error("Failed to initialize disk: ".concat(e))}finally{ep(!1)}}},eI=async()=>{if(ej.disk){eb(!0);try{await L.storageAPI.createPartition({disk:ej.disk.path,start:ef.start,end:ef.end,fstype:ef.fstype||void 0,label:ef.label||void 0}),E.toast.success("Partition created successfully"),eg({open:!1}),ev({start:"0%",end:"100%",fstype:"",label:""}),eR()}catch(e){E.toast.error("Failed to create partition: ".concat(e))}finally{eb(!1)}}},eM=async()=>{if(eN.partition){ek(!0);try{await L.storageAPI.deletePartition(eN.partition.path),E.toast.success("Partition deleted successfully"),eC({open:!1}),eR()}catch(e){E.toast.error("Failed to delete partition: ".concat(e))}finally{ek(!1)}}},ez=async()=>{if(eD.partition){eA(!0);try{await L.storageAPI.mount({device:eD.partition.path,mount_point:eS.mountPoint,fstype:eD.partition.fstype,persistent:eS.persistent}),E.toast.success("Mounted at ".concat(eS.mountPoint)),eT({open:!1}),eP({mountPoint:"",persistent:!1}),eR()}catch(e){E.toast.error("Failed to mount: ".concat(e))}finally{eA(!1)}}},e_=async e=>{try{await L.storageAPI.unmount(e.mountpoint,!1),E.toast.success("Unmounted successfully"),eR()}catch(e){E.toast.error("Failed to unmount: ".concat(e))}};return w&&!N||!C||N&&"admin"!==N.role||T?(0,t.jsx)(O.PageSkeleton,{title:"Disk Management"}):(0,t.jsxs)("div",{className:"flex h-screen",children:[(0,t.jsx)(i.Sidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(n.Header,{title:"Disk Management"}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Disks & Partitions"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage physical disks and partition layouts"})]}),(0,t.jsxs)(o.Button,{onClick:()=>{B(!0),eR()},disabled:P,variant:"outline",children:[(0,t.jsx)(U.RefreshCw,{className:"h-4 w-4 mr-2 ".concat(P?"animate-spin":"")}),"Refresh"]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Disks"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:k.length})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Partitions"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:k.reduce((e,t)=>e+t.partitions.length,0)})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Total Capacity"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:k.reduce((e,t)=>e+t.size,0)>0&&(null==(e=k.find(e=>e.size_human))?void 0:e.size_human)||"0 B"})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{className:"pb-2",children:(0,t.jsx)(l.CardTitle,{className:"text-sm font-medium",children:"Health Status"})}),(0,t.jsx)(l.CardContent,{children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:k.every(e=>!e.smart||e.smart.healthy)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G.CheckCircle,{className:"h-5 w-5 text-green-500"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:"All Healthy"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.AlertTriangle,{className:"h-5 w-5 text-yellow-500"}),(0,t.jsx)("span",{className:"font-medium text-yellow-600",children:"Issues Detected"})]})})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[k.map(e=>{var s;return(0,t.jsx)(l.Card,{children:(0,t.jsxs)(I,{open:A.has(e.name),onOpenChange:()=>(e=>{let t=new Set(A);t.has(e)?t.delete(e):t.add(e),R(t)})(e.name),children:[(0,t.jsx)(M,{asChild:!0,children:(0,t.jsx)(l.CardHeader,{className:"cursor-pointer hover:bg-accent/50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[A.has(e.name)?(0,t.jsx)(W.ChevronDown,{className:"h-5 w-5"}):(0,t.jsx)(q.ChevronRight,{className:"h-5 w-5"}),(e=>{switch(e){case"nvme":return(0,t.jsx)(ee,{className:"h-5 w-5 text-purple-500"});case"ssd":return(0,t.jsx)(Q.Cpu,{className:"h-5 w-5 text-blue-500"});case"hdd":return(0,t.jsx)(et.RotateCcw,{className:"h-5 w-5 text-gray-500"});default:return(0,t.jsx)(V.HardDrive,{className:"h-5 w-5 text-muted-foreground"})}})(e.type),(0,t.jsxs)("div",{children:[(0,t.jsxs)(l.CardTitle,{className:"text-lg flex items-center gap-2",children:[e.path,(e=>{switch(e){case"nvme":return(0,t.jsx)(r.Badge,{className:"bg-purple-500",children:"NVMe"});case"ssd":return(0,t.jsx)(r.Badge,{className:"bg-blue-500",children:"SSD"});case"hdd":return(0,t.jsx)(r.Badge,{variant:"secondary",children:"HDD"});case"virtual":return(0,t.jsx)(r.Badge,{variant:"outline",children:"Virtual"});default:return(0,t.jsx)(r.Badge,{variant:"outline",children:e})}})(e.type),(s=e.smart)?s.healthy?(0,t.jsx)(r.Badge,{className:"bg-green-500",children:"Healthy"}):(0,t.jsx)(r.Badge,{variant:"destructive",children:s.overall_status}):(0,t.jsx)(r.Badge,{variant:"outline",children:"Unknown"})]}),(0,t.jsxs)(l.CardDescription,{children:[e.model||"Unknown Model"," • ",e.size_human," •"," ",e.partitions.length," partition(s)"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.temperature&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(Y.Thermometer,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:[e.temperature,"°C"]})]}),e.serial&&(0,t.jsx)("span",{className:"font-mono text-xs",children:e.serial})]})]})})}),(0,t.jsx)(z,{children:(0,t.jsxs)(l.CardContent,{children:[e.smart&&(0,t.jsxs)("div",{className:"mb-4 p-3 rounded-lg bg-muted/50",children:[(0,t.jsxs)("h4",{className:"font-medium mb-2 flex items-center gap-2",children:[(0,t.jsx)(J.Database,{className:"h-4 w-4"}),"SMART Status"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status:"})," ",(0,t.jsx)("span",{className:e.smart.healthy?"text-green-600":"text-red-600",children:e.smart.overall_status})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Power On:"})," ",e.smart.power_on_hours.toLocaleString(),"h"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Power Cycles:"})," ",e.smart.power_cycles.toLocaleString()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Temperature:"})," ",e.smart.temperature,"°C"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h4",{className:"font-medium",children:"Partitions"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{eu({open:!0,disk:e}),ex({tableType:"gpt"})},children:[(0,t.jsx)(en,{className:"h-4 w-4 mr-1"}),"New Table"]}),(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{eg({open:!0,disk:e}),ev({start:"0%",end:"100%",fstype:"",label:""})},children:[(0,t.jsx)(X.Plus,{className:"h-4 w-4 mr-1"}),"Create Partition"]})]})]}),e.partitions.length>0?(0,t.jsxs)(x.Table,{children:[(0,t.jsx)(x.TableHeader,{children:(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableHead,{children:"Partition"}),(0,t.jsx)(x.TableHead,{children:"Size"}),(0,t.jsx)(x.TableHead,{children:"Type"}),(0,t.jsx)(x.TableHead,{children:"Filesystem"}),(0,t.jsx)(x.TableHead,{children:"Mount Point"}),(0,t.jsx)(x.TableHead,{children:"Label"}),(0,t.jsx)(x.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(x.TableBody,{children:e.partitions.map(e=>(0,t.jsxs)(x.TableRow,{children:[(0,t.jsx)(x.TableCell,{className:"font-mono",children:e.path}),(0,t.jsx)(x.TableCell,{children:e.size_human}),(0,t.jsx)(x.TableCell,{children:(0,t.jsx)(r.Badge,{variant:"outline",children:e.type})}),(0,t.jsx)(x.TableCell,{children:e.fstype?(0,t.jsx)(r.Badge,{variant:"secondary",children:e.fstype}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"Unformatted"})}),(0,t.jsx)(x.TableCell,{children:e.mounted?(0,t.jsx)("span",{className:"text-green-600",children:e.mountpoint}):(0,t.jsx)("span",{className:"text-muted-foreground",children:"Not mounted"})}),(0,t.jsx)(x.TableCell,{children:e.label||(0,t.jsx)("span",{className:"text-muted-foreground",children:"-"})}),(0,t.jsx)(x.TableCell,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[e.mounted?(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>e_(e),children:[(0,t.jsx)(ea,{className:"h-4 w-4 mr-1"}),"Unmount"]}):e.fstype?(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{eT({open:!0,partition:e}),eP({mountPoint:"/mnt/".concat(e.name),persistent:!1})},children:[(0,t.jsx)(es.Play,{className:"h-4 w-4 mr-1"}),"Mount"]}):null,!e.mounted&&(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>{H({open:!0,partition:e}),er({fstype:"ext4",label:"",force:!1})},children:[(0,t.jsx)(J.Database,{className:"h-4 w-4 mr-1"}),"Format"]}),!e.mounted&&(0,t.jsx)(o.Button,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>eC({open:!0,partition:e}),children:(0,t.jsx)(Z.Trash2,{className:"h-4 w-4"})})]})})]},e.name))})]}):(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(V.HardDrive,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{children:"No partitions found on this disk"}),(0,t.jsx)("p",{className:"text-sm",children:"This disk appears to be unpartitioned"}),(0,t.jsxs)(o.Button,{variant:"outline",className:"mt-4",onClick:()=>{eu({open:!0,disk:e}),ex({tableType:"gpt"})},children:[(0,t.jsx)(en,{className:"h-4 w-4 mr-2"}),"Initialize Disk"]})]})]})})]})},e.name)}),0===k.length&&(0,t.jsx)(l.Card,{children:(0,t.jsxs)(l.CardContent,{className:"py-12 text-center",children:[(0,t.jsx)(V.HardDrive,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No Disks Found"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Unable to detect any storage devices on this system"})]})})]})]})})]}),(0,t.jsx)(c.Dialog,{open:F.open,onOpenChange:e=>H({...F,open:e}),children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:"Format Partition"}),(0,t.jsxs)(c.DialogDescription,{children:["Format ",null==(m=F.partition)?void 0:m.path," with a new filesystem.",(0,t.jsx)("span",{className:"text-red-500 block mt-2",children:"Warning: This will erase all data on the partition!"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Filesystem Type"}),(0,t.jsxs)(h.Select,{value:$.fstype,onValueChange:e=>er({...$,fstype:e}),children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"ext4",children:"ext4 (Recommended)"}),(0,t.jsx)(h.SelectItem,{value:"xfs",children:"XFS"}),(0,t.jsx)(h.SelectItem,{value:"btrfs",children:"Btrfs"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Volume Label (optional)"}),(0,t.jsx)(d.Input,{value:$.label,onChange:e=>er({...$,label:e.target.value}),placeholder:"e.g., DATA"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"force",checked:$.force,onChange:e=>er({...$,force:e.target.checked})}),(0,t.jsx)(u.Label,{htmlFor:"force",children:"Force format (skip safety checks)"})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>H({open:!1}),children:"Cancel"}),(0,t.jsx)(o.Button,{variant:"destructive",onClick:eF,disabled:eo,children:eo?"Formatting...":"Format Partition"})]})]})}),(0,t.jsx)(c.Dialog,{open:ed.open,onOpenChange:e=>eu({...ed,open:e}),children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:"Initialize Disk"}),(0,t.jsxs)(c.DialogDescription,{children:["Create a new partition table on ",null==(p=ed.disk)?void 0:p.path,".",(0,t.jsx)("span",{className:"text-red-500 block mt-2",children:"Warning: This will erase all existing partitions and data!"})]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Partition Table Type"}),(0,t.jsxs)(h.Select,{value:eh.tableType,onValueChange:e=>ex({tableType:e}),children:[(0,t.jsx)(h.SelectTrigger,{children:(0,t.jsx)(h.SelectValue,{})}),(0,t.jsxs)(h.SelectContent,{children:[(0,t.jsx)(h.SelectItem,{value:"gpt",children:"GPT (Recommended for disks > 2TB)"}),(0,t.jsx)(h.SelectItem,{value:"msdos",children:"MBR/MS-DOS (Legacy, max 2TB)"})]})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-muted rounded-lg text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"GPT"}),": Modern partition table, supports large disks, more partitions."]}),(0,t.jsxs)("p",{className:"mt-1",children:[(0,t.jsx)("strong",{children:"MBR"}),": Legacy format, required for older systems and BIOS boot."]})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>eu({open:!1}),children:"Cancel"}),(0,t.jsx)(o.Button,{variant:"destructive",onClick:eH,disabled:em,children:em?"Initializing...":"Initialize Disk"})]})]})}),(0,t.jsx)(c.Dialog,{open:ej.open,onOpenChange:e=>eg({...ej,open:e}),children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:"Create Partition"}),(0,t.jsxs)(c.DialogDescription,{children:["Create a new partition on ",null==(j=ej.disk)?void 0:j.path," (",null==(g=ej.disk)?void 0:g.size_human,")."]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",onClick:()=>ev({...ef,start:"0%",end:"100%"}),children:"Use Entire Disk"}),(0,t.jsx)(o.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ev({...ef,start:"0%",end:"50%"}),children:"First Half"}),(0,t.jsx)(o.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>ev({...ef,start:"50%",end:"100%"}),children:"Second Half"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Start Position"}),(0,t.jsx)(d.Input,{value:ef.start,onChange:e=>ev({...ef,start:e.target.value}),placeholder:"0%"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Where partition begins (0% = start of disk)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"End Position"}),(0,t.jsx)(d.Input,{value:ef.end,onChange:e=>ev({...ef,end:e.target.value}),placeholder:"100%"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Where partition ends (100% = end of disk)"})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg text-sm text-blue-800 dark:text-blue-200",children:[(0,t.jsx)("strong",{children:"Tip:"})," For a single partition using the whole disk, use Start: 0% and End: 100%"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Volume Label (optional)"}),(0,t.jsx)(d.Input,{value:ef.label,onChange:e=>ev({...ef,label:e.target.value}),placeholder:"e.g., DATA"})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>eg({open:!1}),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:eI,disabled:ey,children:ey?"Creating...":"Create Partition"})]})]})}),(0,t.jsx)(ei.AlertDialog,{open:eN.open,onOpenChange:e=>eC({...eN,open:e}),children:(0,t.jsxs)(ei.AlertDialogContent,{children:[(0,t.jsxs)(ei.AlertDialogHeader,{children:[(0,t.jsx)(ei.AlertDialogTitle,{children:"Delete Partition"}),(0,t.jsxs)(ei.AlertDialogDescription,{children:["Are you sure you want to delete ",null==(f=eN.partition)?void 0:f.path,"?",(0,t.jsx)("span",{className:"text-red-500 block mt-2",children:"This action cannot be undone and all data will be lost!"})]})]}),(0,t.jsxs)(ei.AlertDialogFooter,{children:[(0,t.jsx)(ei.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(ei.AlertDialogAction,{onClick:eM,disabled:ew,className:"bg-red-600 hover:bg-red-700",children:ew?"Deleting...":"Delete Partition"})]})]})}),(0,t.jsx)(c.Dialog,{open:eD.open,onOpenChange:e=>eT({...eD,open:e}),children:(0,t.jsxs)(c.DialogContent,{children:[(0,t.jsxs)(c.DialogHeader,{children:[(0,t.jsx)(c.DialogTitle,{children:"Mount Partition"}),(0,t.jsxs)(c.DialogDescription,{children:["Mount ",null==(v=eD.partition)?void 0:v.path," (",null==(y=eD.partition)?void 0:y.fstype,") to a directory."]})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Mount Point"}),(0,t.jsx)(d.Input,{value:eS.mountPoint,onChange:e=>eP({...eS,mountPoint:e.target.value}),placeholder:"/mnt/data"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Directory will be created if it does not exist"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(el.Checkbox,{id:"persistent",checked:eS.persistent,onCheckedChange:e=>eP({...eS,persistent:e})}),(0,t.jsx)(u.Label,{htmlFor:"persistent",className:"cursor-pointer",children:"Make persistent (add to /etc/fstab)"})]})]}),(0,t.jsxs)(c.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>eT({open:!1}),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:ez,disabled:eB||!eS.mountPoint,children:eB?"Mounting...":"Mount"})]})]})})]})}}]);