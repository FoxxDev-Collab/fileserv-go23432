(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";e.s(["AlertTriangle",()=>t.default]);var t=e.i(82458)},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},23750,10708,e=>{"use strict";e.s(["Input",()=>r],23750);var t=e.i(18050),a=e.i(47163);function r(e){let{className:r,type:s,...i}=e;return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...i})}e.s(["Label",()=>l],10708);var s=e.i(71645),i=e.i(48425),n=s.forwardRef((e,a)=>(0,t.jsx)(i.Primitive.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));function l(e){let{className:r,...s}=e;return(0,t.jsx)(n,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...s})}n.displayName="Label"},99682,e=>{"use strict";e.s(["usePrevious",()=>a]);var t=e.i(71645);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}},30374,e=>{"use strict";e.s(["Dialog",()=>i,"DialogContent",()=>d,"DialogDescription",()=>x,"DialogFooter",()=>u,"DialogHeader",()=>o,"DialogTitle",()=>m,"DialogTrigger",()=>n],30374);var t=e.i(18050),a=e.i(26999),r=e.i(41947),r=r,s=e.i(47163);function i(e){let{...r}=e;return(0,t.jsx)(a.Root,{"data-slot":"dialog",...r})}function n(e){let{...r}=e;return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...r})}function l(e){let{...r}=e;return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...r})}function c(e){let{className:r,...i}=e;return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",r),...i})}function d(e){let{className:i,children:n,showCloseButton:d=!0,...o}=e;return(0,t.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,t.jsx)(c,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",i),...o,children:[n,d&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.default,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function o(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",a),...r})}function u(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...r})}function m(e){let{className:r,...i}=e;return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,s.cn)("text-lg leading-none font-semibold",r),...i})}function x(e){let{className:r,...i}=e;return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",r),...i})}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},52571,e=>{"use strict";e.s(["Info",()=>t.default]);var t=e.i(79664)},81947,e=>{"use strict";e.s(["Alert",()=>i,"AlertDescription",()=>l,"AlertTitle",()=>n]);var t=e.i(18050),a=e.i(25913),r=e.i(47163);let s=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function i(e){let{className:a,variant:i,...n}=e;return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,r.cn)(s({variant:i}),a),...n})}function n(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-title",className:(0,r.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...s})}function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"alert-description",className:(0,r.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...s})}},23585,e=>{"use strict";e.s(["MoreVertical",()=>t],23585);let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},25959,e=>{"use strict";e.s(["Checkbox",()=>R],25959);var t=e.i(18050),a=e.i(71645),r=e.i(20783),s=e.i(81140),i=e.i(69340),n=e.i(99682),l=e.i(35804),c=e.i(96626);e.i(74080);var d=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}var u=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=function(e){let s=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...i}=e;if(a.isValidElement(s)){var n,l,c;let e,d,o=(d=(e=null==(l=Object.getOwnPropertyDescriptor((n=s).props,"ref"))?void 0:l.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(d=(e=null==(c=Object.getOwnPropertyDescriptor(n,"ref"))?void 0:c.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref,u=function(e,t){let a={...t};for(let r in t){let s=e[r],i=t[r];/^on[A-Z]/.test(r)?s&&i?a[r]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=i(...t);return s(...t),r}:s&&(a[r]=s):"style"===r?a[r]={...s,...i}:"className"===r&&(a[r]=[s,i].filter(Boolean).join(" "))}return{...e,...a}}(i,s.props);return s.type!==a.Fragment&&(u.ref=t?(0,r.composeRefs)(t,o):o),a.cloneElement(s,u)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),i=a.forwardRef((e,r)=>{let{children:i,...n}=e,l=a.Children.toArray(i),c=l.find(o);if(c){let e=c.props.children,i=l.map(t=>t!==c?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...n,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,i):null})}return(0,t.jsx)(s,{...n,ref:r,children:i})});return i.displayName="".concat(e,".Slot"),i}("Primitive.".concat(s)),n=a.forwardRef((e,a)=>{let{asChild:r,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?i:s,{...n,ref:a})});return n.displayName="Primitive.".concat(s),{...e,[s]:n}},{}),m="Checkbox",[x,h]=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[],i=()=>{let t=s.map(e=>a.createContext(e));return function(r){let s=(null==r?void 0:r[e])||t;return a.useMemo(()=>({["__scope".concat(e)]:{...r,[e]:s}}),[r,s])}};return i.scopeName=e,[function(r,i){let n=a.createContext(i),l=s.length;s=[...s,i];let c=r=>{var s;let{scope:i,children:c,...d}=r,o=(null==i||null==(s=i[e])?void 0:s[l])||n,u=a.useMemo(()=>d,Object.values(d));return(0,t.jsx)(o.Provider,{value:u,children:c})};return c.displayName=r+"Provider",[c,function(t,s){var c;let d=(null==s||null==(c=s[e])?void 0:c[l])||n,o=a.useContext(d);if(o)return o;if(void 0!==i)return i;throw Error("`".concat(t,"` must be used within `").concat(r,"`"))}]},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=t[0];if(1===t.length)return s;let i=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let r=e.reduce((e,a)=>{let{useScope:r,scopeName:s}=a,i=r(t)["__scope".concat(s)];return{...e,...i}},{});return a.useMemo(()=>({["__scope".concat(s.scopeName)]:r}),[r])}};return i.scopeName=s.scopeName,i}(i,...r)]}(m),[p,v]=x(m);function f(e){let{__scopeCheckbox:r,checked:s,children:n,defaultChecked:l,disabled:c,form:d,name:o,onCheckedChange:u,required:x,value:h="on",internal_do_not_use_render:v}=e,[f,g]=(0,i.useControllableState)({prop:s,defaultProp:null!=l&&l,onChange:u,caller:m}),[j,y]=a.useState(null),[b,N]=a.useState(null),D=a.useRef(!1),w=!j||!!d||!!j.closest("form"),k={checked:f,disabled:c,setChecked:g,control:j,setControl:y,name:o,form:d,value:h,hasConsumerStoppedPropagationRef:D,required:x,defaultChecked:!C(l)&&l,isFormControl:w,bubbleInput:b,setBubbleInput:N};return(0,t.jsx)(p,{scope:r,...k,children:"function"==typeof v?v(k):n})}var g="CheckboxTrigger",j=a.forwardRef((e,i)=>{let{__scopeCheckbox:n,onKeyDown:l,onClick:c,...d}=e,{control:o,value:m,disabled:x,checked:h,required:p,setControl:f,setChecked:j,hasConsumerStoppedPropagationRef:y,isFormControl:b,bubbleInput:N}=v(g,n),D=(0,r.useComposedRefs)(i,f),w=a.useRef(h);return a.useEffect(()=>{let e=null==o?void 0:o.form;if(e){let t=()=>j(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,j]),(0,t.jsx)(u.button,{type:"button",role:"checkbox","aria-checked":C(h)?"mixed":h,"aria-required":p,"data-state":k(h),"data-disabled":x?"":void 0,disabled:x,value:m,...d,ref:D,onKeyDown:(0,s.composeEventHandlers)(l,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,s.composeEventHandlers)(c,e=>{j(e=>!!C(e)||!e),N&&b&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});j.displayName=g;var y=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:i,defaultChecked:n,required:l,disabled:c,value:d,onCheckedChange:o,form:u,...m}=e;return(0,t.jsx)(f,{__scopeCheckbox:r,checked:i,defaultChecked:n,disabled:c,required:l,onCheckedChange:o,name:s,form:u,value:d,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j,{...m,ref:a,__scopeCheckbox:r}),s&&(0,t.jsx)(w,{__scopeCheckbox:r})]})}})});y.displayName=m;var b="CheckboxIndicator",N=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...i}=e,n=v(b,r);return(0,t.jsx)(c.Presence,{present:s||C(n.checked)||!0===n.checked,children:(0,t.jsx)(u.span,{"data-state":k(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});N.displayName=b;var D="CheckboxBubbleInput",w=a.forwardRef((e,s)=>{let{__scopeCheckbox:i,...c}=e,{control:d,hasConsumerStoppedPropagationRef:o,checked:m,defaultChecked:x,required:h,disabled:p,name:f,value:g,form:j,bubbleInput:y,setBubbleInput:b}=v(D,i),N=(0,r.useComposedRefs)(s,b),w=(0,n.usePrevious)(m),k=(0,l.useSize)(d);a.useEffect(()=>{if(!y)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(w!==m&&e){let a=new Event("click",{bubbles:t});y.indeterminate=C(m),e.call(y,!C(m)&&m),y.dispatchEvent(a)}},[y,w,m,o]);let A=a.useRef(!C(m)&&m);return(0,t.jsx)(u.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=x?x:A.current,required:h,disabled:p,name:f,value:g,form:j,...c,tabIndex:-1,ref:N,style:{...c.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function C(e){return"indeterminate"===e}function k(e){return C(e)?"indeterminate":e?"checked":"unchecked"}w.displayName=D;var A=e.i(78784),I=e.i(47163);function R(e){let{className:a,...r}=e;return(0,t.jsx)(y,{"data-slot":"checkbox",className:(0,I.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(N,{"data-slot":"checkbox-indicator",className:"grid place-content-center text-current transition-none",children:(0,t.jsx)(A.CheckIcon,{className:"size-3.5"})})})}},21785,e=>{"use strict";e.s(["default",()=>t]);let t=(0,e.i(75254).default)("circle-stop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]])},60958,e=>{"use strict";e.s(["default",()=>F],60958);var t=e.i(18050),a=e.i(71645),r=e.i(18566),s=e.i(49786),i=e.i(81868),n=e.i(70065),l=e.i(94179),c=e.i(67881),d=e.i(81947),o=e.i(23750),u=e.i(10708),m=e.i(62870),x=e.i(25959),h=e.i(91432),p=e.i(54858);e.i(73827);var v=e.i(59467),f=e.i(46696),g=e.i(47627),j=e.i(30374),y=e.i(63415),b=e.i(19851),N=e.i(52786),D=e.i(16715),w=e.i(7233),C=e.i(27612),k=e.i(69638),A=e.i(78894),I=e.i(31278),R=e.i(52571),S=e.i(23585),M=e.i(21785),M=M,T=e.i(75254);let P=(0,T.default)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),_=(0,T.default)("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);var B=e.i(63209);function F(){let e=(0,r.useRouter)(),{user:T,isAuthenticated:F,isLoading:z}=(0,h.useAuth)(),[E,H]=(0,a.useState)([]),[L,O]=(0,a.useState)([]),[V,K]=(0,a.useState)(""),[W,U]=(0,a.useState)(!0),[q,X]=(0,a.useState)(!1),[Z,G]=(0,a.useState)(!1),[J,Q]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(!1),[ee,et]=(0,a.useState)(""),[ea,er]=(0,a.useState)({name:"",level:"raid1",devices:[],spares:[],chunk:""}),[es,ei]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!z){if(!F)return void e.replace("/");T&&"user"===T.role&&e.replace("/dashboard")}},[z,F,T,e]);let en=async()=>{try{let[e,t]=await Promise.all([p.storageAPI.getRAIDArrays().catch(()=>[]),p.storageAPI.getAvailableDevicesForRAID().catch(()=>[])]);H(e),O(t)}catch(e){f.toast.error("Failed to load RAID data: ".concat(e))}finally{U(!1),X(!1)}};(0,a.useEffect)(()=>{F&&(null==T?void 0:T.role)==="admin"&&en()},[F,T]);let el=async()=>{if(!ea.name||0===ea.devices.length)return void f.toast.error("Array name and at least one device are required");let e={raid0:2,raid1:2,raid5:3,raid6:4,raid10:4}[ea.level]||2;if(ea.devices.length<e)return void f.toast.error("".concat(ea.level.toUpperCase()," requires at least ").concat(e," devices"));ei(!0);try{await p.storageAPI.createRAIDArray({name:ea.name,level:ea.level,devices:ea.devices,spares:ea.spares.length>0?ea.spares:void 0,chunk:ea.chunk||void 0}),f.toast.success("RAID array ".concat(ea.name," created successfully")),G(!1),er({name:"",level:"raid1",devices:[],spares:[],chunk:""}),en()}catch(e){f.toast.error("Failed to create RAID array: ".concat(e))}finally{ei(!1)}},ec=async e=>{try{let t=await p.storageAPI.getRAIDStatus(e);K(t.detail),Q(!0)}catch(e){f.toast.error("Failed to get RAID status: ".concat(e))}},ed=async e=>{if(confirm('Are you sure you want to stop RAID array "'.concat(e,'"? It will become inactive.')))try{await p.storageAPI.stopRAIDArray(e),f.toast.success("RAID array ".concat(e," stopped")),en()}catch(e){f.toast.error("Failed to stop RAID array: ".concat(e))}},eo=async e=>{if(confirm('Are you sure you want to remove RAID array "'.concat(e,'"? This will stop the array and clear superblocks on all member devices!')))try{await p.storageAPI.removeRAIDArray(e,!0),f.toast.success("RAID array ".concat(e," removed")),en()}catch(e){f.toast.error("Failed to remove RAID array: ".concat(e))}},eu=async e=>{if(ee)try{await p.storageAPI.addRAIDDevice(ee,e),f.toast.success("Device ".concat(e," added to ").concat(ee)),$(!1),en()}catch(e){f.toast.error("Failed to add device: ".concat(e))}},em=async(e,t)=>{if(confirm("Remove device ".concat(t," from ").concat(e,"? The device will be marked as faulty first.")))try{await p.storageAPI.removeRAIDDevice(e,t),f.toast.success("Device ".concat(t," removed from ").concat(e)),en()}catch(e){f.toast.error("Failed to remove device: ".concat(e))}},ex=async(e,t)=>{if(confirm("Mark device ".concat(t," as faulty in ").concat(e,"?")))try{await p.storageAPI.markRAIDDeviceFaulty(e,t),f.toast.success("Device ".concat(t," marked as faulty")),en()}catch(e){f.toast.error("Failed to mark device as faulty: ".concat(e))}};if(z&&!T||!F||T&&"admin"!==T.role||W)return(0,t.jsx)(v.PageSkeleton,{title:"RAID Storage"});let eh=L.filter(e=>!e.in_use);return(0,t.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,t.jsx)(i.Sidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(s.Header,{}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Software RAID Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage Linux software RAID arrays (mdadm)"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{X(!0),en()},disabled:q,children:[(0,t.jsx)(D.RefreshCw,{className:"h-4 w-4 mr-2 ".concat(q?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)(c.Button,{size:"sm",onClick:()=>G(!0),children:[(0,t.jsx)(w.Plus,{className:"h-4 w-4 mr-2"}),"Create Array"]})]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(b.Disc3,{className:"h-10 w-10 text-blue-500"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.CardTitle,{className:"text-lg",children:"Linux Software RAID"}),(0,t.jsx)(n.CardDescription,{children:"Manage mdadm RAID arrays for data redundancy"})]})]}),E.length>0?(0,t.jsx)(k.CheckCircle,{className:"h-8 w-8 text-green-500"}):(0,t.jsx)(R.Info,{className:"h-8 w-8 text-muted-foreground"})]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Badge,{variant:"secondary",children:[E.length," array(s)"]}),(0,t.jsxs)(l.Badge,{variant:"outline",children:[eh.length," device(s) available"]}),E.some(e=>"degraded"===e.state)&&(0,t.jsx)(l.Badge,{variant:"destructive",children:"Degraded array(s)"})]})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"RAID Arrays"}),(0,t.jsx)(n.CardDescription,{children:"Active software RAID arrays"})]}),(0,t.jsx)(n.CardContent,{children:0===E.length?(0,t.jsxs)("div",{className:"py-8 text-center text-muted-foreground",children:[(0,t.jsx)(b.Disc3,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,t.jsx)("p",{children:"No RAID arrays configured"}),(0,t.jsx)("p",{className:"text-sm",children:"Create an array to get started with software RAID"})]}):(0,t.jsx)("div",{className:"space-y-4",children:E.map(e=>(0,t.jsxs)(n.Card,{className:"border",children:[(0,t.jsx)(n.CardHeader,{className:"py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(N.HardDrive,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.CardTitle,{className:"text-base font-mono",children:e.path}),(0,t.jsxs)(n.CardDescription,{children:[e.level.toUpperCase()," - ",e.size_human]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e.toLowerCase()){case"active":case"clean":return(0,t.jsx)(l.Badge,{variant:"default",className:"bg-green-600",children:"Active"});case"degraded":return(0,t.jsx)(l.Badge,{variant:"default",className:"bg-yellow-600",children:"Degraded"});case"rebuilding":case"recovering":return(0,t.jsx)(l.Badge,{variant:"default",className:"bg-blue-600",children:"Rebuilding"});case"inactive":return(0,t.jsx)(l.Badge,{variant:"secondary",children:"Inactive"});default:return(0,t.jsx)(l.Badge,{variant:"outline",children:e})}})(e.state),void 0!==e.sync_percent&&e.sync_percent>0&&e.sync_percent<100&&(0,t.jsxs)(l.Badge,{variant:"outline",children:[e.sync_percent.toFixed(1),"% synced"]}),(0,t.jsxs)(y.DropdownMenu,{children:[(0,t.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(S.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>ec(e.name),children:[(0,t.jsx)(R.Info,{className:"h-4 w-4 mr-2"}),"View Details"]}),(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>{et(e.path),$(!0)},children:[(0,t.jsx)(P,{className:"h-4 w-4 mr-2"}),"Add Device"]}),(0,t.jsx)(y.DropdownMenuSeparator,{}),(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>ed(e.name),children:[(0,t.jsx)(M.default,{className:"h-4 w-4 mr-2"}),"Stop Array"]}),(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>eo(e.name),className:"text-red-600",children:[(0,t.jsx)(C.Trash2,{className:"h-4 w-4 mr-2"}),"Remove Array"]})]})]})]})]})}),(0,t.jsxs)(n.CardContent,{className:"pt-0",children:[(0,t.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,t.jsxs)(g.Table,{children:[(0,t.jsx)(g.TableHeader,{children:(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(g.TableHead,{children:"Device"}),(0,t.jsx)(g.TableHead,{children:"Role"}),(0,t.jsx)(g.TableHead,{children:"State"}),(0,t.jsx)(g.TableHead,{children:"Slot"}),(0,t.jsx)(g.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(g.TableBody,{children:e.members.map((a,r)=>(0,t.jsxs)(g.TableRow,{children:[(0,t.jsx)(g.TableCell,{className:"font-mono text-sm",children:a.device}),(0,t.jsx)(g.TableCell,{children:a.role}),(0,t.jsx)(g.TableCell,{children:(e=>{switch(e.toLowerCase()){case"in_sync":case"active":return(0,t.jsx)(l.Badge,{variant:"outline",className:"text-green-600 border-green-600",children:"In Sync"});case"spare":return(0,t.jsx)(l.Badge,{variant:"outline",children:"Spare"});case"faulty":return(0,t.jsx)(l.Badge,{variant:"destructive",children:"Faulty"});case"rebuilding":return(0,t.jsx)(l.Badge,{variant:"outline",className:"text-blue-600 border-blue-600",children:"Rebuilding"});default:return(0,t.jsx)(l.Badge,{variant:"outline",children:e})}})(a.state)}),(0,t.jsx)(g.TableCell,{children:a.slot}),(0,t.jsx)(g.TableCell,{className:"text-right",children:(0,t.jsxs)(y.DropdownMenu,{children:[(0,t.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",children:(0,t.jsx)(S.MoreVertical,{className:"h-4 w-4"})})}),(0,t.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>ex(e.path,a.device),disabled:"faulty"===a.state,children:[(0,t.jsx)(B.AlertCircle,{className:"h-4 w-4 mr-2"}),"Mark Faulty"]}),(0,t.jsxs)(y.DropdownMenuItem,{onClick:()=>em(e.path,a.device),className:"text-red-600",children:[(0,t.jsx)(_,{className:"h-4 w-4 mr-2"}),"Remove"]})]})]})})]},r))})]})}),(0,t.jsxs)("div",{className:"mt-3 flex gap-4 text-sm text-muted-foreground",children:[(0,t.jsxs)("span",{children:["Devices: ",e.devices]}),(0,t.jsxs)("span",{children:["Active: ",e.active_devices]}),(0,t.jsxs)("span",{children:["Spare: ",e.spare_devices]}),(0,t.jsxs)("span",{children:["Failed: ",e.failed_devices]}),e.chunk_size&&(0,t.jsxs)("span",{children:["Chunk: ",e.chunk_size]})]})]})]},e.name))})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsxs)(n.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,t.jsx)(R.Info,{className:"h-5 w-5"}),"About Software RAID"]})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Linux software RAID (mdadm) provides redundancy and performance improvements by combining multiple disks. Choose the right RAID level based on your needs."}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"RAID 0 (Stripe)"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum performance, no redundancy. Data striped across all disks. Minimum 2 disks."})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"RAID 1 (Mirror)"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Full redundancy, data mirrored across disks. Can survive disk failure. Minimum 2 disks."})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"RAID 5 (Striped Parity)"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Balance of performance and redundancy. Single parity distributed across disks. Minimum 3 disks."})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"RAID 6 (Double Parity)"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enhanced redundancy with dual parity. Can survive 2 disk failures. Minimum 4 disks."})]}),(0,t.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg",children:[(0,t.jsx)("h4",{className:"font-medium",children:"RAID 10 (Stripe + Mirror)"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"High performance with redundancy. Combines striping and mirroring. Minimum 4 disks."})]})]})]})]})]})})]}),(0,t.jsx)(j.Dialog,{open:Z,onOpenChange:G,children:(0,t.jsxs)(j.DialogContent,{className:"max-w-lg",children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsx)(j.DialogTitle,{children:"Create RAID Array"}),(0,t.jsx)(j.DialogDescription,{children:"Create a new software RAID array from available devices"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"array-name",children:"Array Name"}),(0,t.jsx)(o.Input,{id:"array-name",placeholder:"md0",value:ea.name,onChange:e=>er({...ea,name:e.target.value})}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Will create /dev/md",ea.name.replace(/^md/,"")]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"raid-level",children:"RAID Level"}),(0,t.jsxs)(m.Select,{value:ea.level,onValueChange:e=>er({...ea,level:e}),children:[(0,t.jsx)(m.SelectTrigger,{children:(0,t.jsx)(m.SelectValue,{placeholder:"Select level"})}),(0,t.jsxs)(m.SelectContent,{children:[(0,t.jsx)(m.SelectItem,{value:"raid0",children:"RAID 0 (Stripe - 2+ disks)"}),(0,t.jsx)(m.SelectItem,{value:"raid1",children:"RAID 1 (Mirror - 2+ disks)"}),(0,t.jsx)(m.SelectItem,{value:"raid5",children:"RAID 5 (Parity - 3+ disks)"}),(0,t.jsx)(m.SelectItem,{value:"raid6",children:"RAID 6 (Double Parity - 4+ disks)"}),(0,t.jsx)(m.SelectItem,{value:"raid10",children:"RAID 10 (Stripe + Mirror - 4+ disks)"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Select Devices"}),0===eh.length?(0,t.jsxs)(d.Alert,{children:[(0,t.jsx)(A.AlertTriangle,{className:"h-4 w-4"}),(0,t.jsx)(d.AlertTitle,{children:"No Available Devices"}),(0,t.jsx)(d.AlertDescription,{children:"No unused devices found. Devices must not be mounted or in use."})]}):(0,t.jsx)("div",{className:"border rounded-lg max-h-48 overflow-y-auto",children:eh.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 border-b last:border-b-0",children:[(0,t.jsx)(x.Checkbox,{id:e.path,checked:ea.devices.includes(e.path),onCheckedChange:t=>{t?er({...ea,devices:[...ea.devices,e.path]}):er({...ea,devices:ea.devices.filter(t=>t!==e.path)})}}),(0,t.jsxs)("label",{htmlFor:e.path,className:"flex-1 cursor-pointer",children:[(0,t.jsx)("div",{className:"font-mono text-sm",children:e.path}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.size_human," - ",e.model||e.type]})]})]},e.path))}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Selected: ",ea.devices.length," device(s)"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{htmlFor:"chunk-size",children:"Chunk Size (optional)"}),(0,t.jsx)(o.Input,{id:"chunk-size",placeholder:"512K",value:ea.chunk,onChange:e=>er({...ea,chunk:e.target.value})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Default varies by level. Common values: 64K, 128K, 256K, 512K"})]})]}),(0,t.jsxs)(j.DialogFooter,{children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),(0,t.jsx)(c.Button,{onClick:el,disabled:es||ea.devices.length<2,children:es?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Array"})]})]})}),(0,t.jsx)(j.Dialog,{open:J,onOpenChange:Q,children:(0,t.jsxs)(j.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsx)(j.DialogTitle,{children:"RAID Array Details"}),(0,t.jsx)(j.DialogDescription,{children:"Detailed mdadm status output"})]}),(0,t.jsx)("div",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:(0,t.jsx)("pre",{className:"text-xs font-mono whitespace-pre-wrap",children:V})}),(0,t.jsx)(j.DialogFooter,{children:(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>Q(!1),children:"Close"})})]})}),(0,t.jsx)(j.Dialog,{open:Y,onOpenChange:$,children:(0,t.jsxs)(j.DialogContent,{children:[(0,t.jsxs)(j.DialogHeader,{children:[(0,t.jsx)(j.DialogTitle,{children:"Add Device to Array"}),(0,t.jsxs)(j.DialogDescription,{children:["Add a device to ",ee]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===eh.length?(0,t.jsxs)(d.Alert,{children:[(0,t.jsx)(A.AlertTriangle,{className:"h-4 w-4"}),(0,t.jsx)(d.AlertTitle,{children:"No Available Devices"}),(0,t.jsx)(d.AlertDescription,{children:"No unused devices found."})]}):(0,t.jsx)("div",{className:"border rounded-lg max-h-64 overflow-y-auto",children:eh.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border-b last:border-b-0 hover:bg-muted/50 cursor-pointer",onClick:()=>eu(e.path),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-mono text-sm",children:e.path}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[e.size_human," - ",e.model||e.type]})]}),(0,t.jsxs)(c.Button,{size:"sm",children:[(0,t.jsx)(P,{className:"h-4 w-4 mr-2"}),"Add"]})]},e.path))})}),(0,t.jsx)(j.DialogFooter,{children:(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>$(!1),children:"Close"})})]})})]})}}]);