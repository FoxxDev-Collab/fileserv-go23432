(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30374,e=>{"use strict";e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>m,"DialogFooter",()=>x,"DialogHeader",()=>o,"DialogTitle",()=>h,"DialogTrigger",()=>r],30374);var a=e.i(18050),s=e.i(26999),t=e.i(41947),t=t,l=e.i(47163);function i(e){let{...t}=e;return(0,a.jsx)(s.Root,{"data-slot":"dialog",...t})}function r(e){let{...t}=e;return(0,a.jsx)(s.Trigger,{"data-slot":"dialog-trigger",...t})}function n(e){let{...t}=e;return(0,a.jsx)(s.Portal,{"data-slot":"dialog-portal",...t})}function d(e){let{className:t,...i}=e;return(0,a.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...i})}function c(e){let{className:i,children:r,showCloseButton:c=!0,...o}=e;return(0,a.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",i),...o,children:[r,c&&(0,a.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(t.default,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function h(e){let{className:t,...i}=e;return(0,a.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",t),...i})}function m(e){let{className:t,...i}=e;return(0,a.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...i})}},78894,e=>{"use strict";e.s(["AlertTriangle",()=>a.default]);var a=e.i(82458)},73884,e=>{"use strict";e.s(["XCircle",()=>a],73884);let a=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},27025,e=>{"use strict";e.s(["Folder",()=>a],27025);let a=(0,e.i(75254).default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},43531,e=>{"use strict";e.s(["Check",()=>a.default]);var a=e.i(78745)},81203,e=>{"use strict";e.s(["Power",()=>a],81203);let a=(0,e.i(75254).default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]])},86536,e=>{"use strict";e.s(["Eye",()=>a],86536);let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},40160,e=>{"use strict";e.s(["Download",()=>a],40160);let a=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},70756,e=>{"use strict";e.s(["Lock",()=>a],70756);let a=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},94008,e=>{"use strict";e.s(["File",()=>a],94008);let a=(0,e.i(75254).default)("file",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]])},74886,e=>{"use strict";e.s(["Copy",()=>a],74886);let a=(0,e.i(75254).default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},41071,e=>{"use strict";e.s(["MoreHorizontal",()=>a],41071);let a=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},31077,e=>{"use strict";e.s(["default",()=>S],31077);var a=e.i(18050),s=e.i(71645),t=e.i(18566),l=e.i(49786),i=e.i(81868),r=e.i(70065),n=e.i(94179),d=e.i(67881),c=e.i(47627),o=e.i(30374),x=e.i(63415),h=e.i(91432),m=e.i(54858),u=e.i(46696),j=e.i(58524),f=e.i(16715),g=e.i(74886),p=e.i(43531),w=e.i(41071),y=e.i(27612),v=e.i(86536),N=e.i(40160),b=e.i(3116),k=e.i(70756),C=e.i(27025),D=e.i(94008);let T=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var _=e.i(78894),M=e.i(73884),L=e.i(81203);function S(){let e=(0,t.useRouter)(),{user:S,isAuthenticated:H,isLoading:z}=(0,h.useAuth)(),[A,B]=(0,s.useState)([]),[F,P]=(0,s.useState)(!0),[E,R]=(0,s.useState)(!1),[I,V]=(0,s.useState)(null),[O,q]=(0,s.useState)(!1),[U,K]=(0,s.useState)(null);(0,s.useEffect)(()=>{z||H||e.replace("/")},[z,H,e]);let X=async()=>{try{let e=await m.shareLinksAPI.list();B(e||[])}catch(e){u.toast.error("Failed to load share links: ".concat(e))}finally{P(!1),R(!1)}};(0,s.useEffect)(()=>{H&&X()},[H]);let G=e=>{let a=m.shareLinksAPI.getShareUrl(e);navigator.clipboard.writeText(a),V(e.id),u.toast.success("Link copied to clipboard!"),setTimeout(()=>V(null),2e3)},Z=async e=>{try{await m.shareLinksAPI.update(e.id,{enabled:!e.enabled}),u.toast.success(e.enabled?"Share link disabled":"Share link enabled"),X()}catch(e){u.toast.error("Failed to update link: ".concat(e))}},J=async()=>{if(U)try{await m.shareLinksAPI.delete(U.id),u.toast.success("Share link deleted"),q(!1),K(null),X()}catch(e){u.toast.error("Failed to delete link: ".concat(e))}},Q=A.filter(e=>e.enabled&&(!e.expires_at||new Date(e.expires_at)>new Date));return(A.filter(e=>!e.enabled||e.expires_at&&new Date(e.expires_at)<=new Date),z||F)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):H?(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(i.Sidebar,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(l.Header,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"My Shares"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your shared files and folders"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{R(!0),X()},disabled:E,children:[(0,a.jsx)(f.RefreshCw,{className:"h-4 w-4 mr-2 ".concat(E?"animate-spin":"")}),"Refresh"]})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Links"}),(0,a.jsx)(j.Link2,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:A.length})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Active Links"}),(0,a.jsx)(p.Check,{className:"h-4 w-4 text-green-500"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:Q.length})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Views"}),(0,a.jsx)(v.Eye,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:A.reduce((e,a)=>e+a.view_count,0)})})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.CardTitle,{className:"text-sm font-medium",children:"Total Downloads"}),(0,a.jsx)(N.Download,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:A.reduce((e,a)=>e+a.download_count,0)})})]})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsx)(r.CardTitle,{children:"Share Links"}),(0,a.jsx)(r.CardDescription,{children:"All your shared files and folders"})]}),(0,a.jsx)(r.CardContent,{children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(j.Link2,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"No Share Links"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Share files from the Files page to create links"}),(0,a.jsx)(d.Button,{onClick:()=>e.push("/files"),children:"Go to Files"})]}):(0,a.jsxs)(c.Table,{children:[(0,a.jsx)(c.TableHeader,{children:(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableHead,{children:"Name"}),(0,a.jsx)(c.TableHead,{children:"Type"}),(0,a.jsx)(c.TableHead,{children:"Status"}),(0,a.jsx)(c.TableHead,{children:"Views"}),(0,a.jsx)(c.TableHead,{children:"Downloads"}),(0,a.jsx)(c.TableHead,{children:"Expires"}),(0,a.jsx)(c.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(c.TableBody,{children:A.map(e=>(0,a.jsxs)(c.TableRow,{children:[(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["folder"===e.target_type?(0,a.jsx)(C.Folder,{className:"h-4 w-4 text-blue-500"}):(0,a.jsx)(D.File,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name||e.target_name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:e.target_path})]})]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[e.password_hash&&(0,a.jsx)("span",{title:"Password protected",children:(0,a.jsx)(k.Lock,{className:"h-4 w-4 text-yellow-500"})}),(0,a.jsx)("span",{className:"capitalize",children:e.target_type})]})}),(0,a.jsx)(c.TableCell,{children:e.enabled?e.expires_at&&new Date(e.expires_at)<new Date?(0,a.jsxs)(n.Badge,{variant:"destructive",children:[(0,a.jsx)(b.Clock,{className:"h-3 w-3 mr-1"}),"Expired"]}):e.max_downloads>0&&e.download_count>=e.max_downloads?(0,a.jsxs)(n.Badge,{variant:"outline",children:[(0,a.jsx)(N.Download,{className:"h-3 w-3 mr-1"}),"Limit Reached"]}):e.max_views>0&&e.view_count>=e.max_views?(0,a.jsxs)(n.Badge,{variant:"outline",children:[(0,a.jsx)(v.Eye,{className:"h-3 w-3 mr-1"}),"Limit Reached"]}):(0,a.jsxs)(n.Badge,{variant:"default",className:"bg-green-600",children:[(0,a.jsx)(p.Check,{className:"h-3 w-3 mr-1"}),"Active"]}):(0,a.jsxs)(n.Badge,{variant:"secondary",children:[(0,a.jsx)(M.XCircle,{className:"h-3 w-3 mr-1"}),"Disabled"]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(v.Eye,{className:"h-3 w-3 text-muted-foreground"}),e.view_count,e.max_views>0&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:["/ ",e.max_views]})]})}),(0,a.jsx)(c.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.Download,{className:"h-3 w-3 text-muted-foreground"}),e.download_count,e.max_downloads>0&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:["/ ",e.max_downloads]})]})}),(0,a.jsx)(c.TableCell,{children:e.expires_at?(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{children:function(e){let a=new Date(e),s=new Date,t=a.getTime()-s.getTime();if(t<0)return"Expired";let l=Math.floor(t/36e5),i=Math.floor(l/24);return i>0?"".concat(i,"d left"):l>0?"".concat(l,"h left"):"< 1h left"}(e.expires_at)}),(0,a.jsx)("div",{className:"text-muted-foreground text-xs",children:new Date(e.expires_at).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}):(0,a.jsx)("span",{className:"text-muted-foreground",children:"Never"})}),(0,a.jsx)(c.TableCell,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>G(e),children:I===e.id?(0,a.jsx)(p.Check,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(g.Copy,{className:"h-4 w-4"})}),(0,a.jsxs)(x.DropdownMenu,{children:[(0,a.jsx)(x.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",children:(0,a.jsx)(w.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(x.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(x.DropdownMenuItem,{onClick:()=>window.open(m.shareLinksAPI.getShareUrl(e),"_blank"),children:[(0,a.jsx)(T,{className:"h-4 w-4 mr-2"}),"Open Link"]}),(0,a.jsxs)(x.DropdownMenuItem,{onClick:()=>G(e),children:[(0,a.jsx)(g.Copy,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),(0,a.jsx)(x.DropdownMenuSeparator,{}),(0,a.jsxs)(x.DropdownMenuItem,{onClick:()=>Z(e),children:[(0,a.jsx)(L.Power,{className:"h-4 w-4 mr-2"}),e.enabled?"Disable":"Enable"]}),(0,a.jsx)(x.DropdownMenuSeparator,{}),(0,a.jsxs)(x.DropdownMenuItem,{className:"text-red-600",onClick:()=>{K(e),q(!0)},children:[(0,a.jsx)(y.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})})]},e.id))})]})})]})]})})]}),(0,a.jsx)(o.Dialog,{open:O,onOpenChange:q,children:(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsxs)(o.DialogHeader,{children:[(0,a.jsxs)(o.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(_.AlertTriangle,{className:"h-5 w-5 text-red-500"}),"Delete Share Link"]}),(0,a.jsx)(o.DialogDescription,{children:"Are you sure you want to delete this share link? Anyone with the link will no longer be able to access the shared content."})]}),(0,a.jsxs)(o.DialogFooter,{children:[(0,a.jsx)(d.Button,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,a.jsx)(d.Button,{variant:"destructive",onClick:J,children:"Delete Link"})]})]})})]}):null}}]);