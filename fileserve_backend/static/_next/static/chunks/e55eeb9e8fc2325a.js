(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";e.s(["AlertTriangle",()=>s.default]);var s=e.i(82458)},73884,e=>{"use strict";e.s(["XCircle",()=>s],73884);let s=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},40160,e=>{"use strict";e.s(["Download",()=>s],40160);let s=(0,e.i(75254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},78094,e=>{"use strict";e.s(["Network",()=>s],78094);let s=(0,e.i(75254).default)("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},78583,e=>{"use strict";e.s(["FileText",()=>s],78583);let s=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},52571,e=>{"use strict";e.s(["Info",()=>s.default]);var s=e.i(79664)},81947,e=>{"use strict";e.s(["Alert",()=>r,"AlertDescription",()=>i,"AlertTitle",()=>n]);var s=e.i(18050),a=e.i(25913),t=e.i(47163);let l=(0,a.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function r(e){let{className:a,variant:r,...n}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,t.cn)(l({variant:r}),a),...n})}function n(e){let{className:a,...l}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,t.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...l})}function i(e){let{className:a,...l}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,t.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...l})}},81203,e=>{"use strict";e.s(["Power",()=>s],81203);let s=(0,e.i(75254).default)("power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]])},52044,e=>{"use strict";e.s(["Square",()=>s],52044);let s=(0,e.i(75254).default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},10939,e=>{"use strict";e.s(["TerminalOutput",()=>x],10939);var s=e.i(18050),a=e.i(71645),t=e.i(70065),l=e.i(67881),r=e.i(94179),n=e.i(69638),i=e.i(73884),c=e.i(31278);let d=(0,e.i(75254).default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);var o=e.i(37727);function x(e){let{url:x,onComplete:h,onClose:m,title:u="Installation Progress"}=e,[j,p]=(0,a.useState)([]),[g,f]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),[N,w]=(0,a.useState)(""),y=(0,a.useRef)(null),T=(0,a.useRef)(null),C=(0,a.useCallback)(e=>{if(e.startsWith("data: "))try{let t=e.substring(6),l=JSON.parse(t);if("complete"===l.type){var s,a;f(!0),b(null!=(s=l.success)&&s),w(l.message),null==h||h(null!=(a=l.success)&&a)}else p(e=>[...e,{text:l.message,type:l.type}])}catch(s){console.error("Failed to parse SSE data:",s,e)}},[h]);return(0,a.useEffect)(()=>{let e=new AbortController;return T.current=e,(async()=>{try{var s;let a=localStorage.getItem("auth_token"),t=await fetch(x,{method:"GET",headers:{Accept:"text/event-stream",...a?{Authorization:"Bearer ".concat(a)}:{}},signal:e.signal});if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));let l=null==(s=t.body)?void 0:s.getReader();if(!l)throw Error("No response body");let r=new TextDecoder,n="";for(;;){let{done:e,value:s}=await l.read();if(e){if(n.trim())for(let e of n.split("\n"))e.trim()&&C(e);break}let a=(n+=r.decode(s,{stream:!0})).split("\n\n");for(let e of(n=a.pop()||"",a))for(let s of e.split("\n"))s.trim()&&C(s)}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error("Stream error:",e),p(s=>[...s,{text:"Error: ".concat(e),type:"error"}]),f(!0),b(!1),w("Connection to server lost"),null==h||h(!1)}})(),()=>{e.abort()}},[x,C,h]),(0,a.useEffect)(()=>{y.current&&(y.current.scrollTop=y.current.scrollHeight)},[j]),(0,s.jsxs)(t.Card,{className:"border-2 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/50 border-b",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-medium text-sm",children:u})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[g?v?(0,s.jsxs)(r.Badge,{variant:"default",className:"bg-green-600 gap-1",children:[(0,s.jsx)(n.CheckCircle,{className:"h-3 w-3"}),"Complete"]}):(0,s.jsxs)(r.Badge,{variant:"destructive",className:"gap-1",children:[(0,s.jsx)(i.XCircle,{className:"h-3 w-3"}),"Failed"]}):(0,s.jsxs)(r.Badge,{variant:"outline",className:"gap-1",children:[(0,s.jsx)(c.Loader2,{className:"h-3 w-3 animate-spin"}),"Running"]}),g&&m&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:m,children:(0,s.jsx)(o.X,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{ref:y,className:"bg-black text-green-400 p-4 font-mono text-sm overflow-auto max-h-96 min-h-48",style:{fontFamily:"'Fira Code', 'Consolas', monospace"},children:[j.map((e,a)=>(0,s.jsx)("div",{className:"whitespace-pre-wrap ".concat("error"===e.type?"text-red-400":""),children:e.text},a)),!g&&(0,s.jsx)("div",{className:"inline-block animate-pulse",children:"_"})]}),g&&N&&(0,s.jsx)("div",{className:"px-4 py-2 text-sm border-t ".concat(v?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"),children:N})]})}},62285,e=>{"use strict";e.s(["default",()=>z],62285);var s=e.i(18050),a=e.i(71645),t=e.i(18566),l=e.i(49786),r=e.i(81868),n=e.i(70065),i=e.i(94179),c=e.i(67881),d=e.i(81947),o=e.i(91432),x=e.i(10939),h=e.i(54858);e.i(73827);var m=e.i(59467),u=e.i(46696),j=e.i(27341),p=e.i(47627),g=e.i(18393),f=e.i(52786),v=e.i(16715),b=e.i(31343),N=e.i(52044),w=e.i(75254);let y=(0,w.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var T=e.i(81203);let C=(0,w.default)("power-off",[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var S=e.i(40160),k=e.i(69638),B=e.i(73884),A=e.i(78894),H=e.i(31278),M=e.i(78094),F=e.i(52571),_=e.i(98919),P=e.i(61911),R=e.i(75505);let I=(0,w.default)("monitor-smartphone",[["path",{d:"M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8",key:"10dyio"}],["path",{d:"M10 19v-3.96 3.15",key:"1irgej"}],["path",{d:"M7 19h5",key:"qswx4l"}],["rect",{width:"6",height:"10",x:"16",y:"12",rx:"2",key:"1egngj"}]]);var E=e.i(78583);function z(){var e,w,z,U,L;let D=(0,t.useRouter)(),{user:O,isAuthenticated:q,isLoading:V}=(0,o.useAuth)(),[W,X]=(0,a.useState)(null),[K,G]=(0,a.useState)(null),[J,Q]=(0,a.useState)(null),[Y,Z]=(0,a.useState)(!0),[$,ee]=(0,a.useState)(!1),[es,ea]=(0,a.useState)(null),[et,el]=(0,a.useState)(!1),[er,en]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(!V){if(!q)return void D.replace("/");O&&"user"===O.role&&D.replace("/dashboard")}},[V,q,O,D]);let ei=async()=>{try{let e=await h.sharingServicesAPI.getStatus();if(X(e),e.smb.installed&&e.smb.running)try{let e=await h.sharingServicesAPI.getSMBStatus();G(e)}catch(e){}if(e.nfs.installed&&e.nfs.running)try{let e=await h.sharingServicesAPI.getNFSStatus();Q(e)}catch(e){}}catch(e){u.toast.error("Failed to load services: ".concat(e))}finally{Z(!1),ee(!1)}};(0,a.useEffect)(()=>{q&&(null==O?void 0:O.role)==="admin"&&ei()},[q,O]);let ec=(0,a.useCallback)(e=>{e?(u.toast.success("".concat(null==es?void 0:es.toUpperCase()," installed successfully")),ei()):u.toast.error("Failed to install ".concat(null==es?void 0:es.toUpperCase()," - check the output above for details"))},[es]),ed=async(e,s)=>{en("".concat(e,"-").concat(s));try{await h.sharingServicesAPI.control(e,s),u.toast.success("".concat(e.toUpperCase()," ").concat(s," successful")),ei()}catch(a){u.toast.error("Failed to ".concat(s," ").concat(e,": ").concat(a))}finally{en(null)}};if(V&&!O||!q||O&&"admin"!==O.role||Y)return(0,s.jsx)(m.PageSkeleton,{title:"Sharing Services"});let eo=(e,a,t,l)=>{let r=es===a,o=null==er?void 0:er.startsWith(a);return(0,s.jsxs)(n.Card,{className:"flex-1",children:[(0,s.jsx)(n.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[t,(0,s.jsxs)("div",{children:[(0,s.jsx)(n.CardTitle,{className:"text-lg",children:e.display_name}),(0,s.jsx)(n.CardDescription,{children:l})]})]}),e.installed?e.running?(0,s.jsx)(k.CheckCircle,{className:"h-8 w-8 text-green-500"}):(0,s.jsx)(A.AlertTriangle,{className:"h-8 w-8 text-yellow-500"}):(0,s.jsx)(B.XCircle,{className:"h-8 w-8 text-muted-foreground"})]})}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.installed?e.running?(0,s.jsx)(i.Badge,{variant:"default",className:"bg-green-600",children:"Running"}):e.enabled?(0,s.jsx)(i.Badge,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Stopped (Enabled)"}):(0,s.jsx)(i.Badge,{variant:"destructive",children:"Stopped"}):(0,s.jsx)(i.Badge,{variant:"secondary",children:"Not Installed"}),e.version&&(0,s.jsxs)(i.Badge,{variant:"outline",children:["v",e.version]}),e.installed&&e.active_shares>0&&(0,s.jsxs)(i.Badge,{variant:"secondary",children:[e.active_shares," active shares"]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.message}),e.installed?(0,s.jsxs)("div",{className:"pt-2 space-y-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.running?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>ed(a,"stop"),disabled:o,children:[er==="".concat(a,"-stop")?(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,s.jsx)(N.Square,{className:"h-4 w-4 mr-1"}),"Stop"]}),(0,s.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>ed(a,"restart"),disabled:o,children:[er==="".concat(a,"-restart")?(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,s.jsx)(y,{className:"h-4 w-4 mr-1"}),"Restart"]})]}):(0,s.jsxs)(c.Button,{variant:"default",size:"sm",onClick:()=>ed(a,"start"),disabled:o,children:[er==="".concat(a,"-start")?(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,s.jsx)(b.Play,{className:"h-4 w-4 mr-1"}),"Start"]}),e.enabled?(0,s.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:()=>ed(a,"disable"),disabled:o,children:[er==="".concat(a,"-disable")?(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,s.jsx)(C,{className:"h-4 w-4 mr-1"}),"Disable Autostart"]}):(0,s.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:()=>ed(a,"enable"),disabled:o,children:[er==="".concat(a,"-enable")?(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-1 animate-spin"}):(0,s.jsx)(T.Power,{className:"h-4 w-4 mr-1"}),"Enable Autostart"]})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 pt-2 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Service name:"}),(0,s.jsx)("code",{children:e.service_name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Autostart:"}),(0,s.jsx)("span",{children:e.enabled?"Enabled":"Disabled"})]})]})]}):(0,s.jsx)("div",{className:"pt-2",children:(null==W?void 0:W.can_install)?(0,s.jsx)(c.Button,{onClick:()=>{ea(a),el(!0)},disabled:r,className:"w-full",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Installing..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.Download,{className:"h-4 w-4 mr-2"}),"Install ",e.package_name]})}):(0,s.jsxs)(d.Alert,{children:[(0,s.jsx)(_.Shield,{className:"h-4 w-4"}),(0,s.jsx)(d.AlertTitle,{children:"Installation Required"}),(0,s.jsxs)(d.AlertDescription,{children:["Run the following command as root to install:",(0,s.jsx)("code",{className:"block mt-2 p-2 bg-muted rounded text-xs",children:(null==W?void 0:W.package_manager)==="apt"?"sudo apt install ".concat(e.package_name):"sudo dnf install ".concat(e.package_name)})]})]})})]})]})};return(0,s.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,s.jsx)(r.Sidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(l.Header,{}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Sharing Services"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage SMB and NFS file sharing services"})]}),(0,s.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{ee(!0),ei()},disabled:$,children:[(0,s.jsx)(v.RefreshCw,{className:"h-4 w-4 mr-2 ".concat($?"animate-spin":"")}),"Refresh"]})]}),W&&(0,s.jsxs)(s.Fragment,{children:[!W.smb.installed&&!W.nfs.installed&&(0,s.jsxs)(d.Alert,{variant:"destructive",children:[(0,s.jsx)(A.AlertTriangle,{className:"h-4 w-4"}),(0,s.jsx)(d.AlertTitle,{children:"No Sharing Services Installed"}),(0,s.jsx)(d.AlertDescription,{children:"Neither SMB nor NFS are installed on this server. Install at least one sharing service to enable network file sharing for your zones."})]}),W.smb.installed&&!W.smb.running||W.nfs.installed&&!W.nfs.running?(0,s.jsxs)(d.Alert,{children:[(0,s.jsx)(F.Info,{className:"h-4 w-4"}),(0,s.jsx)(d.AlertTitle,{children:"Services Not Running"}),(0,s.jsx)(d.AlertDescription,{children:"Some installed services are not currently running. Start them to enable file sharing."})]}):null]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[W&&eo(W.smb,"smb",(0,s.jsx)(g.Server,{className:"h-10 w-10 text-blue-500"}),"Windows-compatible file sharing using SMB/CIFS protocol"),W&&eo(W.nfs,"nfs",(0,s.jsx)(f.HardDrive,{className:"h-10 w-10 text-orange-500"}),"Unix/Linux native file sharing using NFS protocol")]}),et&&es&&(0,s.jsx)(x.TerminalOutput,{url:"/api/sharing/install/stream?service=".concat(es),title:"".concat(es.toUpperCase()," Installation"),onComplete:ec,onClose:()=>{el(!1),ea(null),ei()}}),W&&(W.smb.running||W.nfs.running)&&(0,s.jsxs)(n.Card,{children:[(0,s.jsxs)(n.CardHeader,{children:[(0,s.jsxs)(n.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(I,{className:"h-5 w-5"}),"Active Connections"]}),(0,s.jsx)(n.CardDescription,{children:"Monitor active client connections and open files"})]}),(0,s.jsx)(n.CardContent,{children:(0,s.jsxs)(j.Tabs,{defaultValue:W.smb.running?"smb":"nfs",children:[(0,s.jsxs)(j.TabsList,{className:"mb-4",children:[W.smb.running&&(0,s.jsxs)(j.TabsTrigger,{value:"smb",className:"gap-2",children:[(0,s.jsx)(g.Server,{className:"h-4 w-4"}),"SMB",K&&K.total_clients>0&&(0,s.jsx)(i.Badge,{variant:"secondary",className:"ml-1",children:K.total_clients})]}),W.nfs.running&&(0,s.jsxs)(j.TabsTrigger,{value:"nfs",className:"gap-2",children:[(0,s.jsx)(f.HardDrive,{className:"h-4 w-4"}),"NFS",J&&J.total_clients>0&&(0,s.jsx)(i.Badge,{variant:"secondary",className:"ml-1",children:J.total_clients})]})]}),W.smb.running&&(0,s.jsxs)(j.TabsContent,{value:"smb",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(P.Users,{className:"h-8 w-8 text-blue-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:null!=(e=null==K?void 0:K.total_clients)?e:0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connected Clients"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(R.FolderOpen,{className:"h-8 w-8 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:null!=(w=null==K?void 0:K.total_shares)?w:0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Shares"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(E.FileText,{className:"h-8 w-8 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:null!=(z=null==K?void 0:K.total_files)?z:0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Open Files"})]})]})]}),K&&K.connections.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Client Sessions"}),(0,s.jsx)("div",{className:"border rounded-lg",children:(0,s.jsxs)(p.Table,{children:[(0,s.jsx)(p.TableHeader,{children:(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableHead,{children:"User"}),(0,s.jsx)(p.TableHead,{children:"Machine"}),(0,s.jsx)(p.TableHead,{children:"IP Address"}),(0,s.jsx)(p.TableHead,{children:"Protocol"}),(0,s.jsx)(p.TableHead,{children:"Encryption"})]})}),(0,s.jsx)(p.TableBody,{children:K.connections.map((e,a)=>(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableCell,{className:"font-medium",children:e.username}),(0,s.jsx)(p.TableCell,{children:e.machine||e.ip_address}),(0,s.jsx)(p.TableCell,{className:"font-mono text-sm",children:e.ip_address}),(0,s.jsx)(p.TableCell,{children:(0,s.jsx)(i.Badge,{variant:"outline",children:e.protocol||"SMB"})}),(0,s.jsx)(p.TableCell,{children:e.encryption?(0,s.jsx)(i.Badge,{variant:"default",className:"bg-green-600",children:"Encrypted"}):(0,s.jsx)(i.Badge,{variant:"secondary",children:"None"})})]},a))})]})})]}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(P.Users,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{children:"No active SMB connections"}),(0,s.jsx)("p",{className:"text-sm",children:"Clients will appear here when they connect"})]}),K&&K.open_files.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Open Files"}),(0,s.jsxs)("div",{className:"border rounded-lg",children:[(0,s.jsxs)(p.Table,{children:[(0,s.jsx)(p.TableHeader,{children:(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableHead,{children:"File"}),(0,s.jsx)(p.TableHead,{children:"User"}),(0,s.jsx)(p.TableHead,{children:"Share"}),(0,s.jsx)(p.TableHead,{children:"Access"})]})}),(0,s.jsx)(p.TableBody,{children:K.open_files.slice(0,10).map((e,a)=>(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableCell,{className:"font-mono text-sm max-w-xs truncate",children:e.name}),(0,s.jsx)(p.TableCell,{children:e.username}),(0,s.jsx)(p.TableCell,{className:"text-muted-foreground",children:e.share_path}),(0,s.jsx)(p.TableCell,{children:(0,s.jsx)(i.Badge,{variant:"outline",children:e.access||"Read"})})]},a))})]}),K.open_files.length>10&&(0,s.jsxs)("div",{className:"p-2 text-center text-sm text-muted-foreground border-t",children:["+ ",K.open_files.length-10," more files"]})]})]})]}),W.nfs.running&&(0,s.jsxs)(j.TabsContent,{value:"nfs",className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(P.Users,{className:"h-8 w-8 text-orange-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:null!=(U=null==J?void 0:J.total_clients)?U:0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connected Clients"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-muted/50 rounded-lg",children:[(0,s.jsx)(R.FolderOpen,{className:"h-8 w-8 text-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:null!=(L=null==J?void 0:J.total_exports)?L:0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Exports"})]})]})]}),J&&J.exports.length>0?(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Exports"}),(0,s.jsx)("div",{className:"border rounded-lg",children:(0,s.jsxs)(p.Table,{children:[(0,s.jsx)(p.TableHeader,{children:(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableHead,{children:"Path"}),(0,s.jsx)(p.TableHead,{children:"Allowed Clients"}),(0,s.jsx)(p.TableHead,{children:"Options"})]})}),(0,s.jsx)(p.TableBody,{children:J.exports.map((e,a)=>(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableCell,{className:"font-mono text-sm",children:e.path}),(0,s.jsx)(p.TableCell,{children:(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.clients.map((e,a)=>(0,s.jsx)(i.Badge,{variant:"outline",children:e},a))})}),(0,s.jsx)(p.TableCell,{className:"text-sm text-muted-foreground max-w-xs truncate",children:e.options})]},a))})]})})]}):(0,s.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,s.jsx)(R.FolderOpen,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{children:"No active NFS exports"}),(0,s.jsx)("p",{className:"text-sm",children:"Configure exports in /etc/exports"})]}),J&&J.clients.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Connected Clients"}),(0,s.jsx)("div",{className:"border rounded-lg",children:(0,s.jsxs)(p.Table,{children:[(0,s.jsx)(p.TableHeader,{children:(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableHead,{children:"Hostname"}),(0,s.jsx)(p.TableHead,{children:"IP Address"}),(0,s.jsx)(p.TableHead,{children:"Version"}),(0,s.jsx)(p.TableHead,{children:"Mounted Path"})]})}),(0,s.jsx)(p.TableBody,{children:J.clients.map((e,a)=>(0,s.jsxs)(p.TableRow,{children:[(0,s.jsx)(p.TableCell,{className:"font-medium",children:e.hostname||e.ip_address}),(0,s.jsx)(p.TableCell,{className:"font-mono text-sm",children:e.ip_address}),(0,s.jsx)(p.TableCell,{className:"text-sm",children:e.nfs_version||"-"}),(0,s.jsx)(p.TableCell,{className:"font-mono text-sm text-muted-foreground",children:e.mounted_path||"-"})]},a))})]})})]})]})]})})]}),(0,s.jsxs)(n.Card,{children:[(0,s.jsx)(n.CardHeader,{children:(0,s.jsxs)(n.CardTitle,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(M.Network,{className:"h-5 w-5"}),"About Sharing Protocols"]})}),(0,s.jsx)(n.CardContent,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"SMB/CIFS (Samba)"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"SMB is the standard protocol for Windows file sharing. It works seamlessly with Windows, macOS, and Linux clients. Use SMB for cross-platform environments or when Windows clients need access."}),(0,s.jsxs)("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:[(0,s.jsx)("li",{children:"Best for Windows environments"}),(0,s.jsx)("li",{children:"Built-in macOS support"}),(0,s.jsx)("li",{children:"User-based authentication"}),(0,s.jsx)("li",{children:"Port 445 (and 139 for legacy)"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"font-medium",children:"NFS (Network File System)"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"NFS is the native protocol for Unix/Linux file sharing. It offers excellent performance for Linux-to-Linux transfers and is commonly used in data centers and HPC environments."}),(0,s.jsxs)("ul",{className:"text-sm text-muted-foreground list-disc list-inside",children:[(0,s.jsx)("li",{children:"Best for Linux/Unix environments"}),(0,s.jsx)("li",{children:"High performance"}),(0,s.jsx)("li",{children:"Host-based or Kerberos authentication"}),(0,s.jsx)("li",{children:"Port 2049 (and others for NFSv3)"})]})]})]})})]}),(0,s.jsxs)(d.Alert,{children:[(0,s.jsx)(_.Shield,{className:"h-4 w-4"}),(0,s.jsx)(d.AlertTitle,{children:"Firewall Configuration"}),(0,s.jsxs)(d.AlertDescription,{children:["If you have a firewall enabled, ensure the appropriate ports are open:",(0,s.jsxs)("ul",{className:"mt-2 list-disc list-inside text-sm",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"SMB:"})," TCP ports 445 (and 139 for legacy support)"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"NFS:"})," TCP/UDP port 2049, plus ports 111, 20048 for NFSv3"]})]}),"On firewalld: ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:"sudo firewall-cmd --add-service=samba --permanent"})]})]})]})})]})]})}}]);