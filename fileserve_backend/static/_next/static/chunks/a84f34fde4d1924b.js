(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";e.s(["AlertTriangle",()=>t.default]);var t=e.i(82458)},30374,e=>{"use strict";e.s(["Dialog",()=>l,"DialogContent",()=>d,"DialogDescription",()=>h,"DialogFooter",()=>u,"DialogHeader",()=>c,"DialogTitle",()=>x,"DialogTrigger",()=>n],30374);var t=e.i(18050),a=e.i(26999),s=e.i(41947),s=s,r=e.i(47163);function l(e){let{...s}=e;return(0,t.jsx)(a.Root,{"data-slot":"dialog",...s})}function n(e){let{...s}=e;return(0,t.jsx)(a.Trigger,{"data-slot":"dialog-trigger",...s})}function i(e){let{...s}=e;return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...l}=e;return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...l})}function d(e){let{className:l,children:n,showCloseButton:d=!0,...c}=e;return(0,t.jsxs)(i,{"data-slot":"dialog-portal",children:[(0,t.jsx)(o,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",l),...c,children:[n,d&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.default,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",a),...s})}function u(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...s})}function x(e){let{className:s,...l}=e;return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",s),...l})}function h(e){let{className:s,...l}=e;return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...l})}},23750,e=>{"use strict";e.s(["Input",()=>s]);var t=e.i(18050),a=e.i(47163);function s(e){let{className:s,type:r,...l}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}},10708,e=>{"use strict";e.s(["Label",()=>n],10708);var t=e.i(18050),a=e.i(71645),s=e.i(48425),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var l=e.i(47163);function n(e){let{className:a,...s}=e;return(0,t.jsx)(r,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}},99682,e=>{"use strict";e.s(["usePrevious",()=>a]);var t=e.i(71645);function a(e){let a=t.useRef({value:e,previous:e});return t.useMemo(()=>(a.current.value!==e&&(a.current.previous=a.current.value,a.current.value=e),a.current.previous),[e])}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},27341,e=>{"use strict";e.s(["Tabs",()=>k,"TabsContent",()=>R,"TabsList",()=>D,"TabsTrigger",()=>I],27341);var t=e.i(18050),a=e.i(71645),s=e.i(81140),r=e.i(42727),l=e.i(96626);e.i(74080);var n=e.i(20783),i=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}var d=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let r=function(e){let s=function(e){let t=a.forwardRef((e,t)=>{let{children:s,...r}=e;if(a.isValidElement(s)){var l,i,o;let e,d,c=(d=(e=null==(i=Object.getOwnPropertyDescriptor((l=s).props,"ref"))?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(d=(e=null==(o=Object.getOwnPropertyDescriptor(l,"ref"))?void 0:o.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref,u=function(e,t){let a={...t};for(let s in t){let r=e[s],l=t[s];/^on[A-Z]/.test(s)?r&&l?a[s]=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let s=l(...t);return r(...t),s}:r&&(a[s]=r):"style"===s?a[s]={...r,...l}:"className"===s&&(a[s]=[r,l].filter(Boolean).join(" "))}return{...e,...a}}(r,s.props);return s.type!==a.Fragment&&(u.ref=t?(0,n.composeRefs)(t,c):c),a.cloneElement(s,u)}return a.Children.count(s)>1?a.Children.only(null):null});return t.displayName="".concat(e,".SlotClone"),t}(e),r=a.forwardRef((e,r)=>{let{children:l,...n}=e,i=a.Children.toArray(l),d=i.find(o);if(d){let e=d.props.children,l=i.map(t=>t!==d?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(s,{...n,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,l):null})}return(0,t.jsx)(s,{...n,ref:r,children:l})});return r.displayName="".concat(e,".Slot"),r}("Primitive.".concat(s)),l=a.forwardRef((e,a)=>{let{asChild:l,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?r:s,{...n,ref:a})});return l.displayName="Primitive.".concat(s),{...e,[s]:l}},{}),c=e.i(86318),u=e.i(69340),x=e.i(10772),h="Tabs",[m,f]=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[],l=()=>{let t=r.map(e=>a.createContext(e));return function(s){let r=(null==s?void 0:s[e])||t;return a.useMemo(()=>({["__scope".concat(e)]:{...s,[e]:r}}),[s,r])}};return l.scopeName=e,[function(s,l){let n=a.createContext(l),i=r.length;r=[...r,l];let o=s=>{var r;let{scope:l,children:o,...d}=s,c=(null==l||null==(r=l[e])?void 0:r[i])||n,u=a.useMemo(()=>d,Object.values(d));return(0,t.jsx)(c.Provider,{value:u,children:o})};return o.displayName=s+"Provider",[o,function(t,r){var o;let d=(null==r||null==(o=r[e])?void 0:o[i])||n,c=a.useContext(d);if(c)return c;if(void 0!==l)return l;throw Error("`".concat(t,"` must be used within `").concat(s,"`"))}]},function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let r=t[0];if(1===t.length)return r;let l=()=>{let e=t.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(t){let s=e.reduce((e,a)=>{let{useScope:s,scopeName:r}=a,l=s(t)["__scope".concat(r)];return{...e,...l}},{});return a.useMemo(()=>({["__scope".concat(r.scopeName)]:s}),[s])}};return l.scopeName=r.scopeName,l}(l,...s)]}(h,[r.createRovingFocusGroupScope]),p=(0,r.createRovingFocusGroupScope)(),[g,j]=m(h),b=a.forwardRef((e,a)=>{let{__scopeTabs:s,value:r,onValueChange:l,defaultValue:n,orientation:i="horizontal",dir:o,activationMode:m="automatic",...f}=e,p=(0,c.useDirection)(o),[j,b]=(0,u.useControllableState)({prop:r,onChange:l,defaultProp:null!=n?n:"",caller:h});return(0,t.jsx)(g,{scope:s,baseId:(0,x.useId)(),value:j,onValueChange:b,orientation:i,dir:p,activationMode:m,children:(0,t.jsx)(d.div,{dir:p,"data-orientation":i,...f,ref:a})})});b.displayName=h;var v="TabsList",y=a.forwardRef((e,a)=>{let{__scopeTabs:s,loop:l=!0,...n}=e,i=j(v,s),o=p(s);return(0,t.jsx)(r.Root,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:l,children:(0,t.jsx)(d.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:a})})});y.displayName=v;var C="TabsTrigger",N=a.forwardRef((e,a)=>{let{__scopeTabs:l,value:n,disabled:i=!1,...o}=e,c=j(C,l),u=p(l),x=w(c.baseId,n),h=S(c.baseId,n),m=n===c.value;return(0,t.jsx)(r.Item,{asChild:!0,...u,focusable:!i,active:m,children:(0,t.jsx)(d.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:x,...o,ref:a,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;m||i||!e||c.onValueChange(n)})})})});N.displayName=C;var T="TabsContent",_=a.forwardRef((e,s)=>{let{__scopeTabs:r,value:n,forceMount:i,children:o,...c}=e,u=j(T,r),x=w(u.baseId,n),h=S(u.baseId,n),m=n===u.value,f=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(l.Presence,{present:i||m,children:a=>{let{present:r}=a;return(0,t.jsx)(d.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":x,hidden:!r,id:h,tabIndex:0,...c,ref:s,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&o})}})});function w(e,t){return"".concat(e,"-trigger-").concat(t)}function S(e,t){return"".concat(e,"-content-").concat(t)}_.displayName=T;var H=e.i(47163);function k(e){let{className:a,...s}=e;return(0,t.jsx)(b,{"data-slot":"tabs",className:(0,H.cn)("flex flex-col gap-2",a),...s})}function D(e){let{className:a,...s}=e;return(0,t.jsx)(y,{"data-slot":"tabs-list",className:(0,H.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function I(e){let{className:a,...s}=e;return(0,t.jsx)(N,{"data-slot":"tabs-trigger",className:(0,H.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function R(e){let{className:a,...s}=e;return(0,t.jsx)(_,{"data-slot":"tabs-content",className:(0,H.cn)("flex-1 outline-none",a),...s})}},78583,e=>{"use strict";e.s(["FileText",()=>t],78583);let t=(0,e.i(75254).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},43928,e=>{"use strict";e.s(["default",()=>I]);var t=e.i(18050),a=e.i(71645),s=e.i(18566),r=e.i(49786),l=e.i(81868),n=e.i(70065),i=e.i(94179),o=e.i(67881),d=e.i(87336),c=e.i(27341),u=e.i(47627),x=e.i(30374),h=e.i(23750),m=e.i(10708),f=e.i(62870),p=e.i(91432),g=e.i(54858);e.i(73827);var j=e.i(59467),b=e.i(46696),v=e.i(94827),y=e.i(16715),C=e.i(7233),N=e.i(27612),T=e.i(84614),_=e.i(61911),w=e.i(78894),S=e.i(39616),H=e.i(52786),k=e.i(75505),D=e.i(78583);function I(){let e=(0,s.useRouter)(),{user:I,isAuthenticated:R,isLoading:P}=(0,p.useAuth)(),[q,F]=(0,a.useState)([]),[M,A]=(0,a.useState)([]),[B,Q]=(0,a.useState)([]),[L,U]=(0,a.useState)([]),[z,E]=(0,a.useState)(!0),[V,G]=(0,a.useState)(!1),[O,K]=(0,a.useState)({open:!1}),[W,Z]=(0,a.useState)({type:"user",target:"",filesystem:"",block_soft:"",block_hard:"",inode_soft:"",inode_hard:""}),[$,J]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!P&&(R?I&&"admin"!==I.role&&e.replace("/dashboard"):e.replace("/"))},[P,R,I,e]);let X=async()=>{try{let[e,t,a,s]=await Promise.all([g.quotasAPI.list(),g.quotasAPI.getStatus(),g.storageAPI.getUserStorageUsage(),g.storageAPI.getMounts()]);F(e),A(t),Q(a),U(s.filter(e=>!e.mount_path.startsWith("/sys")&&!e.mount_path.startsWith("/proc")&&!e.mount_path.startsWith("/run")&&!e.mount_path.startsWith("/dev")&&"tmpfs"!==e.fstype&&"devtmpfs"!==e.fstype))}catch(e){console.error("Failed to fetch quota data:",e)}finally{E(!1),G(!1)}};(0,a.useEffect)(()=>{R&&(null==I?void 0:I.role)==="admin"&&X()},[R,I]);let Y=e=>{let t=e.match(/^(\d+(?:\.\d+)?)\s*([KMGTP]?)B?$/i);if(!t)return 0;let a=parseFloat(t[1]);return a*(({"":1,K:1024,M:1048576,G:0x40000000,T:0x10000000000,P:0x4000000000000})[t[2].toUpperCase()]||1)},ee=async()=>{J(!0);try{await g.quotasAPI.setQuota({type:W.type,target:W.target,filesystem:W.filesystem,block_soft:Y(W.block_soft),block_hard:Y(W.block_hard),inode_soft:parseInt(W.inode_soft)||0,inode_hard:parseInt(W.inode_hard)||0}),b.toast.success("Quota set successfully"),K({open:!1}),X()}catch(e){b.toast.error("Failed to set quota: ".concat(e))}finally{J(!1)}},et=async e=>{if(confirm("Remove quota for ".concat(e.target," on ").concat(e.filesystem,"?")))try{await g.quotasAPI.removeQuota(e.type,e.target,e.filesystem),b.toast.success("Quota removed"),X()}catch(e){b.toast.error("Failed to remove quota: ".concat(e))}},ea=async e=>{try{await g.quotasAPI.enable({filesystem:e,user_quota:!0,group_quota:!0}),b.toast.success("Quotas enabled"),X()}catch(e){b.toast.error("Failed to enable quotas: ".concat(e))}};if(P&&!I||!R||I&&"admin"!==I.role||z)return(0,t.jsx)(j.PageSkeleton,{title:"Quota Management"});let es=q.filter(e=>"user"===e.type),er=q.filter(e=>"group"===e.type),el=q.filter(e=>e.over_quota).length;return(0,t.jsxs)("div",{className:"flex h-screen",children:[(0,t.jsx)(l.Sidebar,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsx)(r.Header,{title:"Quota Management"}),(0,t.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Quota Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage storage quotas for users and groups"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.Button,{onClick:()=>{G(!0),X()},disabled:V,variant:"outline",children:[(0,t.jsx)(y.RefreshCw,{className:"h-4 w-4 mr-2 ".concat(V?"animate-spin":"")}),"Refresh"]}),(0,t.jsxs)(o.Button,{onClick:()=>{var e;K({open:!0}),Z({type:"user",target:"",filesystem:(null==(e=L[0])?void 0:e.mount_path)||"",block_soft:"",block_hard:"",inode_soft:"",inode_hard:""})},children:[(0,t.jsx)(C.Plus,{className:"h-4 w-4 mr-2"}),"Set Quota"]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{className:"pb-2",children:(0,t.jsxs)(n.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(T.User,{className:"h-4 w-4"}),"User Quotas"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:es.length})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{className:"pb-2",children:(0,t.jsxs)(n.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(_.Users,{className:"h-4 w-4"}),"Group Quotas"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:er.length})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{className:"pb-2",children:(0,t.jsxs)(n.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(w.AlertTriangle,{className:"h-4 w-4"}),"Over Quota"]})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsx)("div",{className:"text-2xl font-bold ".concat(el>0?"text-red-600":"text-green-600"),children:el})})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{className:"pb-2",children:(0,t.jsxs)(n.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(H.HardDrive,{className:"h-4 w-4"}),"Filesystems"]})}),(0,t.jsxs)(n.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:M.filter(e=>"on"===e.user_state||"on"===e.group_state).length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"with quotas enabled"})]})]})]}),(0,t.jsxs)(c.Tabs,{defaultValue:"quotas",children:[(0,t.jsxs)(c.TabsList,{children:[(0,t.jsx)(c.TabsTrigger,{value:"quotas",children:"Active Quotas"}),(0,t.jsx)(c.TabsTrigger,{value:"users",children:"User Storage"}),(0,t.jsx)(c.TabsTrigger,{value:"filesystems",children:"Filesystem Status"})]}),(0,t.jsx)(c.TabsContent,{value:"quotas",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Active Quotas"}),(0,t.jsx)(n.CardDescription,{children:"All configured storage quotas"})]}),(0,t.jsx)(n.CardContent,{children:q.length>0?(0,t.jsxs)(u.Table,{children:[(0,t.jsx)(u.TableHeader,{children:(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableHead,{children:"Type"}),(0,t.jsx)(u.TableHead,{children:"Target"}),(0,t.jsx)(u.TableHead,{children:"Filesystem"}),(0,t.jsx)(u.TableHead,{children:"Used"}),(0,t.jsx)(u.TableHead,{children:"Soft Limit"}),(0,t.jsx)(u.TableHead,{children:"Hard Limit"}),(0,t.jsx)(u.TableHead,{children:"Usage"}),(0,t.jsx)(u.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(u.TableBody,{children:q.map(e=>(0,t.jsxs)(u.TableRow,{className:e.over_quota?"bg-red-50":"",children:[(0,t.jsx)(u.TableCell,{children:(0,t.jsxs)(i.Badge,{variant:"outline",children:["user"===e.type?(0,t.jsx)(T.User,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(_.Users,{className:"h-3 w-3 mr-1"}),e.type]})}),(0,t.jsx)(u.TableCell,{className:"font-medium",children:e.target}),(0,t.jsx)(u.TableCell,{className:"font-mono text-sm",children:e.filesystem}),(0,t.jsx)(u.TableCell,{children:e.used_human}),(0,t.jsx)(u.TableCell,{children:e.soft_human||"-"}),(0,t.jsx)(u.TableCell,{children:e.hard_human||"-"}),(0,t.jsx)(u.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Progress,{value:Math.min(e.used_percent,100),className:"w-20 ".concat(e.over_quota?"bg-red-200":"")}),(0,t.jsxs)("span",{className:"text-sm ".concat(e.over_quota?"text-red-600 font-medium":""),children:[e.used_percent.toFixed(1),"%"]}),e.over_quota&&(0,t.jsx)(w.AlertTriangle,{className:"h-4 w-4 text-red-500"})]})}),(0,t.jsx)(u.TableCell,{className:"text-right",children:(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>et(e),children:(0,t.jsx)(N.Trash2,{className:"h-4 w-4"})})})]},e.id))})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(v.Gauge,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground opacity-50"}),(0,t.jsx)("h3",{className:"text-lg font-medium",children:"No Quotas Configured"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Set up storage quotas to limit user and group disk usage"}),(0,t.jsxs)(o.Button,{onClick:()=>K({open:!0}),children:[(0,t.jsx)(C.Plus,{className:"h-4 w-4 mr-2"}),"Set First Quota"]})]})})]})}),(0,t.jsx)(c.TabsContent,{value:"users",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"User Storage Usage"}),(0,t.jsx)(n.CardDescription,{children:"Storage consumption by user"})]}),(0,t.jsx)(n.CardContent,{children:B.length>0?(0,t.jsxs)(u.Table,{children:[(0,t.jsx)(u.TableHeader,{children:(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableHead,{children:"User"}),(0,t.jsx)(u.TableHead,{children:"UID"}),(0,t.jsx)(u.TableHead,{children:"Home Directory"}),(0,t.jsx)(u.TableHead,{children:"Home Size"}),(0,t.jsx)(u.TableHead,{children:"Files"}),(0,t.jsx)(u.TableHead,{children:"Directories"})]})}),(0,t.jsx)(u.TableBody,{children:B.map(e=>(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableCell,{className:"font-medium",children:e.username}),(0,t.jsx)(u.TableCell,{children:e.uid}),(0,t.jsx)(u.TableCell,{className:"font-mono text-sm",children:e.home_dir}),(0,t.jsx)(u.TableCell,{children:e.home_size_human}),(0,t.jsx)(u.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(D.FileText,{className:"h-4 w-4 text-muted-foreground"}),e.file_count.toLocaleString()]})}),(0,t.jsx)(u.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.FolderOpen,{className:"h-4 w-4 text-muted-foreground"}),e.dir_count.toLocaleString()]})})]},e.username))})]}):(0,t.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:"No user storage data available"})})]})}),(0,t.jsx)(c.TabsContent,{value:"filesystems",children:(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Filesystem Quota Status"}),(0,t.jsx)(n.CardDescription,{children:"Quota support status by filesystem"})]}),(0,t.jsx)(n.CardContent,{children:M.length>0?(0,t.jsxs)(u.Table,{children:[(0,t.jsx)(u.TableHeader,{children:(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableHead,{children:"Filesystem"}),(0,t.jsx)(u.TableHead,{children:"Mount Point"}),(0,t.jsx)(u.TableHead,{children:"User Quota"}),(0,t.jsx)(u.TableHead,{children:"Group Quota"}),(0,t.jsx)(u.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(u.TableBody,{children:M.map((e,a)=>(0,t.jsxs)(u.TableRow,{children:[(0,t.jsx)(u.TableCell,{className:"font-mono text-sm",children:e.filesystem}),(0,t.jsx)(u.TableCell,{children:e.mount_point}),(0,t.jsx)(u.TableCell,{children:"on"===e.user_state?(0,t.jsx)(i.Badge,{className:"bg-green-500",children:"Enabled"}):"off"===e.user_state?(0,t.jsx)(i.Badge,{variant:"secondary",children:"Disabled"}):(0,t.jsx)(i.Badge,{variant:"outline",children:"Not Configured"})}),(0,t.jsx)(u.TableCell,{children:"on"===e.group_state?(0,t.jsx)(i.Badge,{className:"bg-green-500",children:"Enabled"}):"off"===e.group_state?(0,t.jsx)(i.Badge,{variant:"secondary",children:"Disabled"}):(0,t.jsx)(i.Badge,{variant:"outline",children:"Not Configured"})}),(0,t.jsx)(u.TableCell,{className:"text-right",children:("on"!==e.user_state||"on"!==e.group_state)&&(0,t.jsxs)(o.Button,{variant:"outline",size:"sm",onClick:()=>ea(e.mount_point),children:[(0,t.jsx)(S.Settings,{className:"h-4 w-4 mr-1"}),"Enable"]})})]},a))})]}):(0,t.jsx)("p",{className:"text-center py-8 text-muted-foreground",children:"No filesystem quota status available"})})]})})]})]})})]}),(0,t.jsx)(x.Dialog,{open:O.open,onOpenChange:e=>K({open:e}),children:(0,t.jsxs)(x.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(x.DialogHeader,{children:[(0,t.jsx)(x.DialogTitle,{children:"Set Storage Quota"}),(0,t.jsx)(x.DialogDescription,{children:"Configure storage limits for a user or group"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Quota Type"}),(0,t.jsxs)(f.Select,{value:W.type,onValueChange:e=>Z({...W,type:e}),children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{})}),(0,t.jsxs)(f.SelectContent,{children:[(0,t.jsx)(f.SelectItem,{value:"user",children:"User"}),(0,t.jsx)(f.SelectItem,{value:"group",children:"Group"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"user"===W.type?"Username":"Group Name"}),(0,t.jsx)(h.Input,{value:W.target,onChange:e=>Z({...W,target:e.target.value}),placeholder:"user"===W.type?"john":"developers"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Filesystem"}),(0,t.jsxs)(f.Select,{value:W.filesystem,onValueChange:e=>Z({...W,filesystem:e}),children:[(0,t.jsx)(f.SelectTrigger,{children:(0,t.jsx)(f.SelectValue,{placeholder:"Select filesystem"})}),(0,t.jsx)(f.SelectContent,{children:L.map(e=>(0,t.jsxs)(f.SelectItem,{value:e.mount_path,children:[e.mount_path," (",e.fstype,")"]},e.mount_path))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Soft Limit (Block)"}),(0,t.jsx)(h.Input,{value:W.block_soft,onChange:e=>Z({...W,block_soft:e.target.value}),placeholder:"e.g., 10G"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Hard Limit (Block)"}),(0,t.jsx)(h.Input,{value:W.block_hard,onChange:e=>Z({...W,block_hard:e.target.value}),placeholder:"e.g., 15G"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Soft Limit (Inodes)"}),(0,t.jsx)(h.Input,{value:W.inode_soft,onChange:e=>Z({...W,inode_soft:e.target.value}),placeholder:"e.g., 100000"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Label,{children:"Hard Limit (Inodes)"}),(0,t.jsx)(h.Input,{value:W.inode_hard,onChange:e=>Z({...W,inode_hard:e.target.value}),placeholder:"e.g., 150000"})]})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Use K, M, G, T suffixes for sizes. Leave empty for no limit."})]}),(0,t.jsxs)(x.DialogFooter,{children:[(0,t.jsx)(o.Button,{variant:"outline",onClick:()=>K({open:!1}),children:"Cancel"}),(0,t.jsx)(o.Button,{onClick:ee,disabled:$||!W.target||!W.filesystem,children:$?"Saving...":"Set Quota"})]})]})})]})}}]);