(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12795,e=>{"use strict";e.s(["default",()=>T]);var s=e.i(18050),a=e.i(71645),l=e.i(18566),n=e.i(49786),i=e.i(81868),t=e.i(70065),r=e.i(94179),d=e.i(67881),o=e.i(62870),c=e.i(23750),x=e.i(10708),m=e.i(84762),h=e.i(19036),u=e.i(91432),p=e.i(54858);e.i(73827);var j=e.i(59467),g=e.i(46696),_=e.i(71689),b=e.i(72520),f=e.i(43531),v=e.i(61911),w=e.i(48256),N=e.i(84614),y=e.i(78094),C=e.i(58524),S=e.i(98919),k=e.i(27025),L=e.i(63059),I=e.i(94351),A=e.i(52786),B=e.i(18393),F=e.i(52571);let P={share_name:"",comment:"",valid_users:"",invalid_users:"",write_list:"",read_list:"",create_mask:"0644",directory_mask:"0755",force_user:"",force_group:"",veto_files:"",inherit:!1},D={export_path:"",allowed_hosts:["*"],root_squash:!0,all_squash:!1,anon_uid:65534,anon_gid:65534,sync:!0,no_subtree_check:!0,secure:!0,fsid:""},U={public_enabled:!1,max_link_expiry:0,allow_download:!0,allow_upload:!1,allow_preview:!0,allow_listing:!0,require_auth:!0},q=[{id:"basic",label:"Basic Info",icon:F.Info},{id:"access",label:"Access Control",icon:S.Shield},{id:"smb",label:"SMB Sharing",icon:B.Server},{id:"nfs",label:"NFS Sharing",icon:A.HardDrive},{id:"web",label:"Web Sharing",icon:C.Link2},{id:"review",label:"Review",icon:f.Check}];function T(){let e=(0,l.useRouter)(),{user:T,isAuthenticated:z,isLoading:R}=(0,u.useAuth)(),[G,V]=(0,a.useState)(0),[H,M]=(0,a.useState)([]),[E,Z]=(0,a.useState)([]),[W,O]=(0,a.useState)([]),[K,Q]=(0,a.useState)(!0),[$,J]=(0,a.useState)(!1),[X,Y]=(0,a.useState)(""),[ee,es]=(0,a.useState)([]),[ea,el]=(0,a.useState)(!1),[en,ei]=(0,a.useState)(""),[et,er]=(0,a.useState)(""),[ed,eo]=(0,a.useState)(""),[ec,ex]=(0,a.useState)(""),[em,eh]=(0,a.useState)(""),[eu,ep]=(0,a.useState)({pool_id:"",name:"",path:"",description:"",zone_type:"group",enabled:!0,auto_provision:!1,allowed_users:[],allowed_groups:[],deny_users:[],deny_groups:[],allow_guest_access:!1,read_only:!1,browsable:!0,smb_enabled:!0,smb_options:{...P},nfs_enabled:!1,nfs_options:{...D},web_enabled:!0,web_options:{...U},max_quota_per_user:0});(0,a.useEffect)(()=>{if(!R){if(!z)return void e.replace("/");T&&"user"===T.role&&e.replace("/dashboard")}},[R,z,T,e]),(0,a.useEffect)(()=>{let e=async()=>{try{let[e,s,a]=await Promise.all([p.poolsAPI.list(),p.usersAPI.list(),p.systemUsersAPI.listGroups()]);M(e||[]);let l=(s||[]).map(e=>e.username),n=(a||[]).map(e=>e.name);Z(l),O(n),e&&e.length>0&&(ep(s=>({...s,pool_id:e[0].id})),ej(e[0].path))}catch(e){g.toast.error("Failed to load data: ".concat(e))}finally{Q(!1)}};z&&(null==T?void 0:T.role)==="admin"&&e()},[z,T]);let ej=async e=>{el(!0);try{let s=await p.storageAPI.browseDirectories(e);Y(s.current_path),es(s.entries.filter(e=>e.is_dir))}catch(e){g.toast.error("Failed to browse directory: ".concat(e))}finally{el(!1)}},eg=()=>{let e=H.find(e=>e.id===eu.pool_id);return e?"".concat(e.path,"/").concat(eu.path).replace(/\/+/g,"/").replace(/\/$/,""):""},e_=(e,s,a)=>{s&&!eu[e].includes(s)&&(ep(a=>({...a,[e]:[...a[e],s]})),a(""))},eb=(e,s)=>{ep(a=>({...a,[e]:a[e].filter(e=>e!==s)}))},ef=()=>{em&&!eu.nfs_options.allowed_hosts.includes(em)&&(ep(e=>({...e,nfs_options:{...e.nfs_options,allowed_hosts:[...e.nfs_options.allowed_hosts,em]}})),eh(""))},ev=async()=>{J(!0);try{await p.zonesAPI.create({pool_id:eu.pool_id,name:eu.name,path:eu.path,description:eu.description,zone_type:eu.zone_type,enabled:eu.enabled,auto_provision:eu.auto_provision,allowed_users:eu.allowed_users,allowed_groups:eu.allowed_groups,deny_users:eu.deny_users,deny_groups:eu.deny_groups,allow_network_shares:eu.smb_enabled||eu.nfs_enabled,allow_web_shares:eu.web_enabled,allow_guest_access:eu.allow_guest_access,smb_enabled:eu.smb_enabled,nfs_enabled:eu.nfs_enabled,smb_options:eu.smb_enabled?eu.smb_options:void 0,nfs_options:eu.nfs_enabled?eu.nfs_options:void 0,web_options:eu.web_enabled?eu.web_options:void 0,max_quota_per_user:1024*eu.max_quota_per_user*1048576,read_only:eu.read_only,browsable:eu.browsable}),g.toast.success("Zone created successfully!"),e.push("/admin/storage/zones")}catch(e){g.toast.error("Failed to create zone: ".concat(e))}finally{J(!1)}};if(R&&!T||!z||T&&"admin"!==T.role||K)return(0,s.jsx)(j.PageSkeleton,{title:"Create Zone"});let ew=H.find(e=>e.id===eu.pool_id);return(0,s.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,s.jsx)(i.Sidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(n.Header,{}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/admin/storage/zones"),children:[(0,s.jsx)(_.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Zones"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create Share Zone"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Configure a new zone for organizing and sharing files"})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:q.map((e,a)=>{let l=e.icon,n=a===G,i=a<G;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ".concat(n?"border-primary bg-primary text-primary-foreground":i?"border-primary bg-primary/20 text-primary":"border-muted bg-muted text-muted-foreground"),children:i?(0,s.jsx)(f.Check,{className:"h-5 w-5"}):(0,s.jsx)(l,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"ml-2 text-sm font-medium ".concat(n?"text-foreground":"text-muted-foreground"),children:e.label}),a<q.length-1&&(0,s.jsx)(L.ChevronRight,{className:"h-4 w-4 mx-4 text-muted-foreground"})]},e.id)})}),(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"pt-6",children:[0===G&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"pool",children:"Storage Pool *"}),(0,s.jsxs)(o.Select,{value:eu.pool_id,onValueChange:e=>{ep(s=>({...s,pool_id:e}));let s=H.find(s=>s.id===e);s&&ej(s.path)},children:[(0,s.jsx)(o.SelectTrigger,{children:(0,s.jsx)(o.SelectValue,{placeholder:"Select a pool"})}),(0,s.jsx)(o.SelectContent,{children:H.map(e=>(0,s.jsx)(o.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.HardDrive,{className:"h-4 w-4"}),e.name," (",e.path,")"]})},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"name",children:"Zone Name *"}),(0,s.jsx)(c.Input,{id:"name",placeholder:"Team Documents",value:eu.name,onChange:e=>ep(s=>({...s,name:e.target.value}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"path",children:"Zone Path *"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(c.Input,{id:"path",placeholder:"team-docs",value:eu.path,onChange:e=>{var s;return s=e.target.value,void ep(e=>({...e,path:s}))},className:"flex-1"})}),ew&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Full path: ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:eg()})]})]}),ew&&(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)(x.Label,{className:"text-sm font-medium",children:"Browse Existing Directories"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(I.Home,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-mono",children:X})]}),(0,s.jsx)("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded",children:ea?(0,s.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"Loading..."}):0===ee.length?(0,s.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"No subdirectories"}):ee.map(e=>(0,s.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-muted text-left text-sm",onClick:()=>(e=>{let s=H.find(e=>e.id===eu.pool_id);if(s){let a=e.path.replace(s.path,"").replace(/^\//,"");ep(e=>({...e,path:a}))}ej(e.path)})(e),children:[(0,s.jsx)(k.Folder,{className:"h-4 w-4 text-blue-500"}),(0,s.jsx)("span",{children:e.name}),!e.writable&&(0,s.jsx)(r.Badge,{variant:"outline",className:"ml-auto text-xs",children:"Read-only"})]},e.path))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"zone_type",children:"Zone Type *"}),(0,s.jsxs)(o.Select,{value:eu.zone_type,onValueChange:e=>ep(s=>({...s,zone_type:e})),children:[(0,s.jsx)(o.SelectTrigger,{children:(0,s.jsx)(o.SelectValue,{})}),(0,s.jsxs)(o.SelectContent,{children:[(0,s.jsx)(o.SelectItem,{value:"personal",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.User,{className:"h-4 w-4"}),"Personal - User home directories"]})}),(0,s.jsx)(o.SelectItem,{value:"group",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Users,{className:"h-4 w-4"}),"Group - Team/department shares"]})}),(0,s.jsx)(o.SelectItem,{value:"public",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Globe,{className:"h-4 w-4"}),"Public - Publicly accessible shares"]})})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(m.Textarea,{id:"description",placeholder:"Describe the purpose of this zone...",value:eu.description,onChange:e=>ep(s=>({...s,description:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Enabled"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Zone is active and accessible"})]}),(0,s.jsx)(h.Switch,{checked:eu.enabled,onCheckedChange:e=>ep(s=>({...s,enabled:e}))})]}),"personal"===eu.zone_type&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Auto-Provision"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically create directories for new users"})]}),(0,s.jsx)(h.Switch,{checked:eu.auto_provision,onCheckedChange:e=>ep(s=>({...s,auto_provision:e}))})]})]})}),1===G&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"General Permissions"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Read Only"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Prevent any write operations"})]}),(0,s.jsx)(h.Switch,{checked:eu.read_only,onCheckedChange:e=>ep(s=>({...s,read_only:e}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Browsable"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show in network browser"})]}),(0,s.jsx)(h.Switch,{checked:eu.browsable,onCheckedChange:e=>ep(s=>({...s,browsable:e}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Guest Access"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow anonymous access"})]}),(0,s.jsx)(h.Switch,{checked:eu.allow_guest_access,onCheckedChange:e=>ep(s=>({...s,allow_guest_access:e}))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Allowed Users"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.Select,{value:en,onValueChange:ei,children:[(0,s.jsx)(o.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(o.SelectValue,{placeholder:"Select user"})}),(0,s.jsx)(o.SelectContent,{children:E.filter(e=>!eu.allowed_users.includes(e)).map(e=>(0,s.jsx)(o.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>e_("allowed_users",en,ei),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eu.allowed_users.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>eb("allowed_users",e),children:[(0,s.jsx)(N.User,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eu.allowed_users.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No users specified (all users allowed)"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Allowed Groups"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.Select,{value:et,onValueChange:er,children:[(0,s.jsx)(o.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(o.SelectValue,{placeholder:"Select group"})}),(0,s.jsx)(o.SelectContent,{children:W.filter(e=>!eu.allowed_groups.includes(e)).map(e=>(0,s.jsx)(o.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>e_("allowed_groups",et,er),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eu.allowed_groups.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>eb("allowed_groups",e),children:[(0,s.jsx)(v.Users,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eu.allowed_groups.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No groups specified"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Denied Users"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.Select,{value:ed,onValueChange:eo,children:[(0,s.jsx)(o.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(o.SelectValue,{placeholder:"Select user to deny"})}),(0,s.jsx)(o.SelectContent,{children:E.filter(e=>!eu.deny_users.includes(e)).map(e=>(0,s.jsx)(o.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>e_("deny_users",ed,eo),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eu.deny_users.map(e=>(0,s.jsxs)(r.Badge,{variant:"destructive",className:"cursor-pointer",onClick:()=>eb("deny_users",e),children:[(0,s.jsx)(N.User,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eu.deny_users.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No users denied"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Denied Groups"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.Select,{value:ec,onValueChange:ex,children:[(0,s.jsx)(o.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(o.SelectValue,{placeholder:"Select group to deny"})}),(0,s.jsx)(o.SelectContent,{children:W.filter(e=>!eu.deny_groups.includes(e)).map(e=>(0,s.jsx)(o.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>e_("deny_groups",ec,ex),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eu.deny_groups.map(e=>(0,s.jsxs)(r.Badge,{variant:"destructive",className:"cursor-pointer",onClick:()=>eb("deny_groups",e),children:[(0,s.jsx)(v.Users,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eu.deny_groups.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No groups denied"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"quota",children:"User Quota (GB)"}),(0,s.jsx)(c.Input,{id:"quota",type:"number",min:"0",placeholder:"0 = unlimited",value:eu.max_quota_per_user||"",onChange:e=>ep(s=>({...s,max_quota_per_user:parseInt(e.target.value)||0}))}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum storage per user in this zone (0 = unlimited)"})]})]})}),2===G&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(B.Server,{className:"h-5 w-5"}),"SMB/CIFS Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure Windows file sharing (Samba)"})]}),(0,s.jsx)(h.Switch,{checked:eu.smb_enabled,onCheckedChange:e=>ep(s=>({...s,smb_enabled:e}))})]}),eu.smb_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_share_name",children:"Share Name"}),(0,s.jsx)(c.Input,{id:"smb_share_name",placeholder:eu.name||"share-name",value:eu.smb_options.share_name,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,share_name:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Name shown in Windows network"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_comment",children:"Comment"}),(0,s.jsx)(c.Input,{id:"smb_comment",placeholder:"Team documents share",value:eu.smb_options.comment,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,comment:e.target.value}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_create_mask",children:"File Create Mask"}),(0,s.jsx)(c.Input,{id:"smb_create_mask",placeholder:"0644",value:eu.smb_options.create_mask,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,create_mask:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permissions for new files"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_dir_mask",children:"Directory Create Mask"}),(0,s.jsx)(c.Input,{id:"smb_dir_mask",placeholder:"0755",value:eu.smb_options.directory_mask,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,directory_mask:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permissions for new directories"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_force_user",children:"Force User"}),(0,s.jsx)(c.Input,{id:"smb_force_user",placeholder:"nobody",value:eu.smb_options.force_user,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,force_user:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Run all operations as this user"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_force_group",children:"Force Group"}),(0,s.jsx)(c.Input,{id:"smb_force_group",placeholder:"nogroup",value:eu.smb_options.force_group,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,force_group:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Run all operations as this group"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_veto",children:"Veto Files"}),(0,s.jsx)(c.Input,{id:"smb_veto",placeholder:"/*.exe/*.bat/*.cmd/",value:eu.smb_options.veto_files,onChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,veto_files:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Files to hide/block (Samba veto pattern)"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Inherit Permissions"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"New files inherit parent permissions"})]}),(0,s.jsx)(h.Switch,{checked:eu.smb_options.inherit,onCheckedChange:e=>ep(s=>({...s,smb_options:{...s.smb_options,inherit:e}}))})]})]})]}),3===G&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(A.HardDrive,{className:"h-5 w-5"}),"NFS Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure Network File System exports"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_enabled,onCheckedChange:e=>ep(s=>({...s,nfs_enabled:e}))})]}),eu.nfs_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Allowed Hosts"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(c.Input,{placeholder:"192.168.1.0/24 or hostname",value:em,onChange:e=>eh(e.target.value),onKeyDown:e=>"Enter"===e.key&&ef()}),(0,s.jsx)(d.Button,{variant:"outline",onClick:ef,children:"Add"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:eu.nfs_options.allowed_hosts.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>{ep(s=>({...s,nfs_options:{...s.nfs_options,allowed_hosts:s.nfs_options.allowed_hosts.filter(s=>s!==e)}}))},children:[(0,s.jsx)(y.Network,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Networks/hosts allowed to mount (use * for all)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Root Squash"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Map root to nobody"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_options.root_squash,onCheckedChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,root_squash:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"All Squash"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Map all users to nobody"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_options.all_squash,onCheckedChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,all_squash:e}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"nfs_anon_uid",children:"Anonymous UID"}),(0,s.jsx)(c.Input,{id:"nfs_anon_uid",type:"number",value:eu.nfs_options.anon_uid,onChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,anon_uid:parseInt(e.target.value)||65534}}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"nfs_anon_gid",children:"Anonymous GID"}),(0,s.jsx)(c.Input,{id:"nfs_anon_gid",type:"number",value:eu.nfs_options.anon_gid,onChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,anon_gid:parseInt(e.target.value)||65534}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Sync"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sync writes immediately"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_options.sync,onCheckedChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,sync:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Secure"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Require privileged ports"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_options.secure,onCheckedChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,secure:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"No Subtree Check"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Disable subtree checking"})]}),(0,s.jsx)(h.Switch,{checked:eu.nfs_options.no_subtree_check,onCheckedChange:e=>ep(s=>({...s,nfs_options:{...s.nfs_options,no_subtree_check:e}}))})]})]})]})]}),4===G&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(C.Link2,{className:"h-5 w-5"}),"Web Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure web-based file access and public links"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_enabled,onCheckedChange:e=>ep(s=>({...s,web_enabled:e}))})]}),eu.web_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Public Link Sharing"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow users to create shareable links"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.public_enabled,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,public_enabled:e}}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"web_max_expiry",children:"Max Link Expiry (days)"}),(0,s.jsx)(c.Input,{id:"web_max_expiry",type:"number",min:"0",placeholder:"0 = no limit",value:eu.web_options.max_link_expiry||"",onChange:e=>ep(s=>({...s,web_options:{...s.web_options,max_link_expiry:parseInt(e.target.value)||0}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum days before links expire (0 = unlimited)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Download"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users can download files"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.allow_download,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,allow_download:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Upload"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users can upload files"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.allow_upload,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,allow_upload:e}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Preview"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show file previews in browser"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.allow_preview,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,allow_preview:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Listing"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show folder contents"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.allow_listing,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,allow_listing:e}}))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Require Authentication"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users must log in for web access"})]}),(0,s.jsx)(h.Switch,{checked:eu.web_options.require_auth,onCheckedChange:e=>ep(s=>({...s,web_options:{...s.web_options,require_auth:e}}))})]})]})]}),5===G&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Review Zone Configuration"}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(F.Info,{className:"h-4 w-4"}),"Basic Information"]})}),(0,s.jsxs)(t.CardContent,{className:"text-sm space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Name:"}),(0,s.jsx)("span",{className:"font-medium",children:eu.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Pool:"}),(0,s.jsx)("span",{className:"font-medium",children:null==ew?void 0:ew.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Path:"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:eg()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,s.jsx)(r.Badge,{variant:"outline",children:eu.zone_type})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,s.jsx)(r.Badge,{variant:eu.enabled?"default":"secondary",children:eu.enabled?"Enabled":"Disabled"})]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(S.Shield,{className:"h-4 w-4"}),"Access Control"]})}),(0,s.jsxs)(t.CardContent,{className:"text-sm space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[eu.read_only&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Read Only"}),eu.browsable&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Browsable"}),eu.allow_guest_access&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Guest Access"})]}),eu.allowed_users.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Allowed Users: "}),eu.allowed_users.join(", ")]}),eu.allowed_groups.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Allowed Groups: "}),eu.allowed_groups.join(", ")]}),eu.deny_users.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Denied Users: "}),eu.deny_users.join(", ")]}),eu.deny_groups.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Denied Groups: "}),eu.deny_groups.join(", ")]})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-2",children:(0,s.jsxs)(t.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(y.Network,{className:"h-4 w-4"}),"Sharing Protocols"]})}),(0,s.jsxs)(t.CardContent,{className:"text-sm space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(B.Server,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"SMB:"}),(0,s.jsx)(r.Badge,{variant:eu.smb_enabled?"default":"secondary",children:eu.smb_enabled?"Enabled":"Disabled"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(A.HardDrive,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"NFS:"}),(0,s.jsx)(r.Badge,{variant:eu.nfs_enabled?"default":"secondary",children:eu.nfs_enabled?"Enabled":"Disabled"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.Link2,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Web:"}),(0,s.jsx)(r.Badge,{variant:eu.web_enabled?"default":"secondary",children:eu.web_enabled?"Enabled":"Disabled"})]})]}),eu.smb_enabled&&eu.smb_options.share_name&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"SMB Share Name: "}),eu.smb_options.share_name]}),eu.nfs_enabled&&eu.nfs_options.allowed_hosts.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"NFS Allowed Hosts: "}),eu.nfs_options.allowed_hosts.join(", ")]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,s.jsxs)(d.Button,{variant:"outline",onClick:()=>V(e=>e-1),disabled:0===G,children:[(0,s.jsx)(_.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Previous"]}),G<q.length-1?(0,s.jsxs)(d.Button,{onClick:()=>V(e=>e+1),disabled:!(0!==G||eu.pool_id&&eu.name&&eu.path),children:["Next",(0,s.jsx)(b.ArrowRight,{className:"h-4 w-4 ml-2"})]}):(0,s.jsxs)(d.Button,{onClick:ev,disabled:$,children:[$?"Creating...":"Create Zone",(0,s.jsx)(f.Check,{className:"h-4 w-4 ml-2"})]})]})]})})]})})]})]})}}]);