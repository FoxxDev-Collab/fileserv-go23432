(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12795,e=>{"use strict";e.s(["default",()=>z]);var s=e.i(18050),a=e.i(71645),l=e.i(18566),n=e.i(49786),t=e.i(81868),i=e.i(70065),r=e.i(94179),d=e.i(67881),c=e.i(62870),o=e.i(23750),x=e.i(10708),m=e.i(84762),h=e.i(19036),u=e.i(91432),p=e.i(54858);e.i(73827);var j=e.i(59467),g=e.i(46696),_=e.i(71689),b=e.i(72520),f=e.i(43531),w=e.i(61911),v=e.i(48256),N=e.i(84614),y=e.i(78094),C=e.i(58524),S=e.i(98919),k=e.i(27025),L=e.i(63059),A=e.i(94351),I=e.i(52786),B=e.i(18393),F=e.i(52571),P=e.i(63209);let U={share_name:"",comment:"",valid_users:"",invalid_users:"",write_list:"",read_list:"",create_mask:"0644",directory_mask:"0755",force_user:"",force_group:"",veto_files:"",inherit:!1},D={export_path:"",allowed_hosts:["*"],root_squash:!0,all_squash:!1,anon_uid:65534,anon_gid:65534,sync:!0,no_subtree_check:!0,secure:!0,fsid:""},q={public_enabled:!1,max_link_expiry:0,allow_download:!0,allow_upload:!1,allow_preview:!0,allow_listing:!0,require_auth:!0},T=[{id:"basic",label:"Basic Info",icon:F.Info},{id:"access",label:"Access Control",icon:S.Shield},{id:"smb",label:"SMB Sharing",icon:B.Server},{id:"nfs",label:"NFS Sharing",icon:I.HardDrive},{id:"web",label:"Web Sharing",icon:C.Link2},{id:"review",label:"Review",icon:f.Check}];function z(){let e=(0,l.useRouter)(),{user:z,isAuthenticated:G,isLoading:R}=(0,u.useAuth)(),[V,H]=(0,a.useState)(0),[M,E]=(0,a.useState)([]),[Z,W]=(0,a.useState)([]),[O,K]=(0,a.useState)([]),[Q,$]=(0,a.useState)(!0),[J,X]=(0,a.useState)(!1),[Y,ee]=(0,a.useState)(!0),[es,ea]=(0,a.useState)(!0),[el,en]=(0,a.useState)(""),[et,ei]=(0,a.useState)([]),[er,ed]=(0,a.useState)(!1),[ec,eo]=(0,a.useState)(""),[ex,em]=(0,a.useState)(""),[eh,eu]=(0,a.useState)(""),[ep,ej]=(0,a.useState)(""),[eg,e_]=(0,a.useState)(""),[eb,ef]=(0,a.useState)({pool_id:"",name:"",path:"",description:"",zone_type:"group",enabled:!0,auto_provision:!1,allowed_users:[],allowed_groups:[],deny_users:[],deny_groups:[],allow_guest_access:!1,read_only:!1,browsable:!0,smb_enabled:!0,smb_options:{...U},nfs_enabled:!1,nfs_options:{...D},web_enabled:!0,web_options:{...q},max_quota_per_user:0});(0,a.useEffect)(()=>{if(!R){if(!G)return void e.replace("/");z&&"user"===z.role&&e.replace("/dashboard")}},[R,G,z,e]),(0,a.useEffect)(()=>{let e=async()=>{try{let[e,s,a,l]=await Promise.all([p.poolsAPI.list(),p.usersAPI.list(),p.systemUsersAPI.list(!0),p.systemUsersAPI.listGroups()]);E(e||[]);let n=(s||[]).map(e=>e.username),t=(a||[]).map(e=>e.username),i=Array.from(new Set([...n,...t])).sort(),r=(l||[]).map(e=>e.name);W(i),K(r),e&&e.length>0&&(ef(s=>({...s,pool_id:e[0].id})),ew(e[0].path))}catch(e){g.toast.error("Failed to load data: ".concat(e))}finally{$(!1)}};G&&(null==z?void 0:z.role)==="admin"&&e()},[G,z]);let ew=async e=>{ed(!0);try{let s=await p.storageAPI.browseDirectories(e);en(s.current_path),ei(s.entries.filter(e=>e.is_dir))}catch(e){g.toast.error("Failed to browse directory: ".concat(e))}finally{ed(!1)}},ev=()=>{let e=M.find(e=>e.id===eb.pool_id);return e?"".concat(e.path,"/").concat(eb.path).replace(/\/+/g,"/").replace(/\/$/,""):""},eN=(e,s,a)=>{s&&!eb[e].includes(s)&&(ef(a=>({...a,[e]:[...a[e],s]})),a(""))},ey=(e,s)=>{ef(a=>({...a,[e]:a[e].filter(e=>e!==s)}))},eC=()=>{eg&&!eb.nfs_options.allowed_hosts.includes(eg)&&(ef(e=>({...e,nfs_options:{...e.nfs_options,allowed_hosts:[...e.nfs_options.allowed_hosts,eg]}})),e_(""))},eS=async()=>{X(!0);try{await p.zonesAPI.create({pool_id:eb.pool_id,name:eb.name,path:eb.path,description:eb.description,zone_type:eb.zone_type,enabled:eb.enabled,auto_provision:eb.auto_provision,allowed_users:eb.allowed_users,allowed_groups:eb.allowed_groups,deny_users:eb.deny_users,deny_groups:eb.deny_groups,allow_network_shares:eb.smb_enabled||eb.nfs_enabled,allow_web_shares:eb.web_enabled,allow_guest_access:eb.allow_guest_access,smb_enabled:eb.smb_enabled,nfs_enabled:eb.nfs_enabled,smb_options:eb.smb_enabled?eb.smb_options:void 0,nfs_options:eb.nfs_enabled?eb.nfs_options:void 0,web_options:eb.web_enabled?eb.web_options:void 0,max_quota_per_user:1024*eb.max_quota_per_user*1048576,read_only:eb.read_only,browsable:eb.browsable}),g.toast.success("Zone created successfully!"),e.push("/admin/storage/zones")}catch(e){g.toast.error("Failed to create zone: ".concat(e))}finally{X(!1)}};if(R&&!z||!G||z&&"admin"!==z.role||Q)return(0,s.jsx)(j.PageSkeleton,{title:"Create Zone"});let ek=M.find(e=>e.id===eb.pool_id);return(0,s.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,s.jsx)(t.Sidebar,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(n.Header,{}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>e.push("/admin/storage/zones"),children:[(0,s.jsx)(_.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Zones"]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Create Share Zone"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Configure a new zone for organizing and sharing files"})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:T.map((e,a)=>{let l=e.icon,n=a===V,t=a<V;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-full border-2 transition-colors ".concat(n?"border-primary bg-primary text-primary-foreground":t?"border-primary bg-primary/20 text-primary":"border-muted bg-muted text-muted-foreground"),children:t?(0,s.jsx)(f.Check,{className:"h-5 w-5"}):(0,s.jsx)(l,{className:"h-5 w-5"})}),(0,s.jsx)("span",{className:"ml-2 text-sm font-medium ".concat(n?"text-foreground":"text-muted-foreground"),children:e.label}),a<T.length-1&&(0,s.jsx)(L.ChevronRight,{className:"h-4 w-4 mx-4 text-muted-foreground"})]},e.id)})}),(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"pt-6",children:[0===V&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"pool",children:"Storage Pool *"}),(0,s.jsxs)(c.Select,{value:eb.pool_id,onValueChange:e=>{ef(s=>({...s,pool_id:e}));let s=M.find(s=>s.id===e);s&&ew(s.path)},children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{placeholder:"Select a pool"})}),(0,s.jsx)(c.SelectContent,{children:M.map(e=>(0,s.jsx)(c.SelectItem,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"h-4 w-4"}),e.name," (",e.path,")"]})},e.id))})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"name",children:"Zone Name *"}),(0,s.jsx)(o.Input,{id:"name",placeholder:"Team Documents",value:eb.name,onChange:e=>ef(s=>({...s,name:e.target.value}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"path",children:"Zone Path *"}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(o.Input,{id:"path",placeholder:"team-docs",value:eb.path,onChange:e=>{var s;return s=e.target.value,void ef(e=>({...e,path:s}))},className:"flex-1"})}),ek&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Full path: ",(0,s.jsx)("code",{className:"bg-muted px-1 rounded",children:ev()})]})]}),ek&&(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsx)(x.Label,{className:"text-sm font-medium",children:"Browse Existing Directories"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)(A.Home,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-mono",children:el})]}),(0,s.jsx)("div",{className:"mt-2 max-h-48 overflow-y-auto border rounded",children:er?(0,s.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"Loading..."}):0===et.length?(0,s.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"No subdirectories"}):et.map(e=>(0,s.jsxs)("button",{className:"w-full flex items-center gap-2 px-3 py-2 hover:bg-muted text-left text-sm",onClick:()=>(e=>{let s=M.find(e=>e.id===eb.pool_id);if(s){let a=e.path.replace(s.path,"").replace(/^\//,"");ef(e=>({...e,path:a}))}ew(e.path)})(e),children:[(0,s.jsx)(k.Folder,{className:"h-4 w-4 text-blue-500"}),(0,s.jsx)("span",{children:e.name}),!e.writable&&(0,s.jsx)(r.Badge,{variant:"outline",className:"ml-auto text-xs",children:"Read-only"})]},e.path))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"zone_type",children:"Zone Type *"}),(0,s.jsxs)(c.Select,{value:eb.zone_type,onValueChange:e=>ef(s=>({...s,zone_type:e})),children:[(0,s.jsx)(c.SelectTrigger,{children:(0,s.jsx)(c.SelectValue,{})}),(0,s.jsxs)(c.SelectContent,{children:[(0,s.jsx)(c.SelectItem,{value:"personal",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.User,{className:"h-4 w-4"}),"Personal - User home directories"]})}),(0,s.jsx)(c.SelectItem,{value:"group",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.Users,{className:"h-4 w-4"}),"Group - Team/department shares"]})}),(0,s.jsx)(c.SelectItem,{value:"public",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Globe,{className:"h-4 w-4"}),"Public - Publicly accessible shares"]})})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"description",children:"Description"}),(0,s.jsx)(m.Textarea,{id:"description",placeholder:"Describe the purpose of this zone...",value:eb.description,onChange:e=>ef(s=>({...s,description:e.target.value}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Enabled"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Zone is active and accessible"})]}),(0,s.jsx)(h.Switch,{checked:eb.enabled,onCheckedChange:e=>ef(s=>({...s,enabled:e}))})]}),"personal"===eb.zone_type&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Auto-Provision"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically create directories for new users"})]}),(0,s.jsx)(h.Switch,{checked:eb.auto_provision,onCheckedChange:e=>ef(s=>({...s,auto_provision:e}))})]})]})}),1===V&&(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"General Permissions"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Read Only"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Prevent any write operations"})]}),(0,s.jsx)(h.Switch,{checked:eb.read_only,onCheckedChange:e=>ef(s=>({...s,read_only:e}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Browsable"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Show in network browser"})]}),(0,s.jsx)(h.Switch,{checked:eb.browsable,onCheckedChange:e=>ef(s=>({...s,browsable:e}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Guest Access"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow anonymous access"})]}),(0,s.jsx)(h.Switch,{checked:eb.allow_guest_access,onCheckedChange:e=>ef(s=>({...s,allow_guest_access:e}))})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow All Users"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Grant access to all authenticated users"})]}),(0,s.jsx)(h.Switch,{checked:Y,onCheckedChange:e=>{ee(e),e&&ef(e=>({...e,allowed_users:[]}))}})]}),!Y&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Label,{children:"Allowed Users"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.Select,{value:ec,onValueChange:eo,children:[(0,s.jsx)(c.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(c.SelectValue,{placeholder:"Select user"})}),(0,s.jsx)(c.SelectContent,{children:Z.filter(e=>!eb.allowed_users.includes(e)).map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>eN("allowed_users",ec,eo),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eb.allowed_users.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>ey("allowed_users",e),children:[(0,s.jsx)(N.User,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eb.allowed_users.length&&(0,s.jsxs)("span",{className:"text-sm text-muted-foreground text-amber-600",children:[(0,s.jsx)(P.AlertCircle,{className:"h-3 w-3 inline mr-1"}),"No users selected - no one will have access"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow All Groups"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No group restriction (access based on user settings)"})]}),(0,s.jsx)(h.Switch,{checked:es,onCheckedChange:e=>{ea(e),e&&ef(e=>({...e,allowed_groups:[]}))}})]}),!es&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Label,{children:"Allowed Groups"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.Select,{value:ex,onValueChange:em,children:[(0,s.jsx)(c.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(c.SelectValue,{placeholder:"Select group"})}),(0,s.jsx)(c.SelectContent,{children:O.filter(e=>!eb.allowed_groups.includes(e)).map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>eN("allowed_groups",ex,em),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eb.allowed_groups.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>ey("allowed_groups",e),children:[(0,s.jsx)(w.Users,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eb.allowed_groups.length&&(0,s.jsxs)("span",{className:"text-sm text-muted-foreground text-amber-600",children:[(0,s.jsx)(P.AlertCircle,{className:"h-3 w-3 inline mr-1"}),"No groups selected"]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Denied Users"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.Select,{value:eh,onValueChange:eu,children:[(0,s.jsx)(c.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(c.SelectValue,{placeholder:"Select user to deny"})}),(0,s.jsx)(c.SelectContent,{children:Z.filter(e=>!eb.deny_users.includes(e)).map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>eN("deny_users",eh,eu),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eb.deny_users.map(e=>(0,s.jsxs)(r.Badge,{variant:"destructive",className:"cursor-pointer",onClick:()=>ey("deny_users",e),children:[(0,s.jsx)(N.User,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eb.deny_users.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No users denied"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Denied Groups"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.Select,{value:ep,onValueChange:ej,children:[(0,s.jsx)(c.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(c.SelectValue,{placeholder:"Select group to deny"})}),(0,s.jsx)(c.SelectContent,{children:O.filter(e=>!eb.deny_groups.includes(e)).map(e=>(0,s.jsx)(c.SelectItem,{value:e,children:e},e))})]}),(0,s.jsx)(d.Button,{variant:"outline",onClick:()=>eN("deny_groups",ep,ej),children:"Add"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[eb.deny_groups.map(e=>(0,s.jsxs)(r.Badge,{variant:"destructive",className:"cursor-pointer",onClick:()=>ey("deny_groups",e),children:[(0,s.jsx)(w.Users,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e)),0===eb.deny_groups.length&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No groups denied"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{htmlFor:"quota",children:"User Quota (GB)"}),(0,s.jsx)(o.Input,{id:"quota",type:"number",min:"0",placeholder:"0 = unlimited",value:eb.max_quota_per_user||"",onChange:e=>ef(s=>({...s,max_quota_per_user:parseInt(e.target.value)||0}))}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum storage per user in this zone (0 = unlimited)"})]})]})}),2===V&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(B.Server,{className:"h-5 w-5"}),"SMB/CIFS Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure Windows file sharing (Samba)"})]}),(0,s.jsx)(h.Switch,{checked:eb.smb_enabled,onCheckedChange:e=>ef(s=>({...s,smb_enabled:e}))})]}),eb.smb_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_share_name",children:"Share Name"}),(0,s.jsx)(o.Input,{id:"smb_share_name",placeholder:eb.name||"share-name",value:eb.smb_options.share_name,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,share_name:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Name shown in Windows network"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_comment",children:"Comment"}),(0,s.jsx)(o.Input,{id:"smb_comment",placeholder:"Team documents share",value:eb.smb_options.comment,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,comment:e.target.value}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_create_mask",children:"File Create Mask"}),(0,s.jsx)(o.Input,{id:"smb_create_mask",placeholder:"0644",value:eb.smb_options.create_mask,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,create_mask:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permissions for new files"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_dir_mask",children:"Directory Create Mask"}),(0,s.jsx)(o.Input,{id:"smb_dir_mask",placeholder:"0755",value:eb.smb_options.directory_mask,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,directory_mask:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Permissions for new directories"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_force_user",children:"Force User"}),(0,s.jsx)(o.Input,{id:"smb_force_user",placeholder:"nobody",value:eb.smb_options.force_user,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,force_user:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Run all operations as this user"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_force_group",children:"Force Group"}),(0,s.jsx)(o.Input,{id:"smb_force_group",placeholder:"nogroup",value:eb.smb_options.force_group,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,force_group:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Run all operations as this group"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"smb_veto",children:"Veto Files"}),(0,s.jsx)(o.Input,{id:"smb_veto",placeholder:"/*.exe/*.bat/*.cmd/",value:eb.smb_options.veto_files,onChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,veto_files:e.target.value}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Files to hide/block (Samba veto pattern)"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Inherit Permissions"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"New files inherit parent permissions"})]}),(0,s.jsx)(h.Switch,{checked:eb.smb_options.inherit,onCheckedChange:e=>ef(s=>({...s,smb_options:{...s.smb_options,inherit:e}}))})]})]})]}),3===V&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"h-5 w-5"}),"NFS Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure Network File System exports"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_enabled,onCheckedChange:e=>ef(s=>({...s,nfs_enabled:e}))})]}),eb.nfs_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(x.Label,{children:"Allowed Hosts"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(o.Input,{placeholder:"192.168.1.0/24 or hostname",value:eg,onChange:e=>e_(e.target.value),onKeyDown:e=>"Enter"===e.key&&eC()}),(0,s.jsx)(d.Button,{variant:"outline",onClick:eC,children:"Add"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:eb.nfs_options.allowed_hosts.map(e=>(0,s.jsxs)(r.Badge,{variant:"secondary",className:"cursor-pointer",onClick:()=>{ef(s=>({...s,nfs_options:{...s.nfs_options,allowed_hosts:s.nfs_options.allowed_hosts.filter(s=>s!==e)}}))},children:[(0,s.jsx)(y.Network,{className:"h-3 w-3 mr-1"}),e,(0,s.jsx)("span",{className:"ml-1",children:"×"})]},e))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Networks/hosts allowed to mount (use * for all)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Root Squash"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Map root to nobody"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_options.root_squash,onCheckedChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,root_squash:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"All Squash"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Map all users to nobody"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_options.all_squash,onCheckedChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,all_squash:e}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"nfs_anon_uid",children:"Anonymous UID"}),(0,s.jsx)(o.Input,{id:"nfs_anon_uid",type:"number",value:eb.nfs_options.anon_uid,onChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,anon_uid:parseInt(e.target.value)||65534}}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"nfs_anon_gid",children:"Anonymous GID"}),(0,s.jsx)(o.Input,{id:"nfs_anon_gid",type:"number",value:eb.nfs_options.anon_gid,onChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,anon_gid:parseInt(e.target.value)||65534}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Sync"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sync writes immediately"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_options.sync,onCheckedChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,sync:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Secure"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Require privileged ports"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_options.secure,onCheckedChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,secure:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"No Subtree Check"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Disable subtree checking"})]}),(0,s.jsx)(h.Switch,{checked:eb.nfs_options.no_subtree_check,onCheckedChange:e=>ef(s=>({...s,nfs_options:{...s.nfs_options,no_subtree_check:e}}))})]})]})]})]}),4===V&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium flex items-center gap-2",children:[(0,s.jsx)(C.Link2,{className:"h-5 w-5"}),"Web Sharing"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Configure web-based file access and public links"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_enabled,onCheckedChange:e=>ef(s=>({...s,web_enabled:e}))})]}),eb.web_enabled&&(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Public Link Sharing"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow users to create shareable links"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.public_enabled,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,public_enabled:e}}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(x.Label,{htmlFor:"web_max_expiry",children:"Max Link Expiry (days)"}),(0,s.jsx)(o.Input,{id:"web_max_expiry",type:"number",min:"0",placeholder:"0 = no limit",value:eb.web_options.max_link_expiry||"",onChange:e=>ef(s=>({...s,web_options:{...s.web_options,max_link_expiry:parseInt(e.target.value)||0}}))}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum days before links expire (0 = unlimited)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Download"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users can download files"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.allow_download,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,allow_download:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Upload"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Users can upload files"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.allow_upload,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,allow_upload:e}}))})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Preview"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show file previews in browser"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.allow_preview,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,allow_preview:e}}))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Allow Listing"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Show folder contents"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.allow_listing,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,allow_listing:e}}))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Label,{children:"Require Authentication"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Users must log in for web access"})]}),(0,s.jsx)(h.Switch,{checked:eb.web_options.require_auth,onCheckedChange:e=>ef(s=>({...s,web_options:{...s.web_options,require_auth:e}}))})]})]})]}),5===V&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"text-lg font-medium",children:"Review Zone Configuration"}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)(i.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(F.Info,{className:"h-4 w-4"}),"Basic Information"]})}),(0,s.jsxs)(i.CardContent,{className:"text-sm space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Name:"}),(0,s.jsx)("span",{className:"font-medium",children:eb.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Pool:"}),(0,s.jsx)("span",{className:"font-medium",children:null==ek?void 0:ek.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Path:"}),(0,s.jsx)("span",{className:"font-mono text-xs",children:ev()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,s.jsx)(r.Badge,{variant:"outline",children:eb.zone_type})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,s.jsx)(r.Badge,{variant:eb.enabled?"default":"secondary",children:eb.enabled?"Enabled":"Disabled"})]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)(i.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(S.Shield,{className:"h-4 w-4"}),"Access Control"]})}),(0,s.jsxs)(i.CardContent,{className:"text-sm space-y-2",children:[(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[eb.read_only&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Read Only"}),eb.browsable&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Browsable"}),eb.allow_guest_access&&(0,s.jsx)(r.Badge,{variant:"secondary",children:"Guest Access"}),Y&&(0,s.jsx)(r.Badge,{variant:"default",children:"All Users Allowed"}),es&&(0,s.jsx)(r.Badge,{variant:"default",children:"All Groups Allowed"})]}),!Y&&eb.allowed_users.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Allowed Users: "}),eb.allowed_users.join(", ")]}),!es&&eb.allowed_groups.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Allowed Groups: "}),eb.allowed_groups.join(", ")]}),eb.deny_users.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Denied Users: "}),eb.deny_users.join(", ")]}),eb.deny_groups.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Denied Groups: "}),eb.deny_groups.join(", ")]})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{className:"pb-2",children:(0,s.jsxs)(i.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(y.Network,{className:"h-4 w-4"}),"Sharing Protocols"]})}),(0,s.jsxs)(i.CardContent,{className:"text-sm space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(B.Server,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"SMB:"}),(0,s.jsx)(r.Badge,{variant:eb.smb_enabled?"default":"secondary",children:eb.smb_enabled?"Enabled":"Disabled"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(I.HardDrive,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"NFS:"}),(0,s.jsx)(r.Badge,{variant:eb.nfs_enabled?"default":"secondary",children:eb.nfs_enabled?"Enabled":"Disabled"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.Link2,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Web:"}),(0,s.jsx)(r.Badge,{variant:eb.web_enabled?"default":"secondary",children:eb.web_enabled?"Enabled":"Disabled"})]})]}),eb.smb_enabled&&eb.smb_options.share_name&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"SMB Share Name: "}),eb.smb_options.share_name]}),eb.nfs_enabled&&eb.nfs_options.allowed_hosts.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"NFS Allowed Hosts: "}),eb.nfs_options.allowed_hosts.join(", ")]})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-8 pt-6 border-t",children:[(0,s.jsxs)(d.Button,{variant:"outline",onClick:()=>H(e=>e-1),disabled:0===V,children:[(0,s.jsx)(_.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Previous"]}),V<T.length-1?(0,s.jsxs)(d.Button,{onClick:()=>H(e=>e+1),disabled:!(0!==V||eb.pool_id&&eb.name&&eb.path),children:["Next",(0,s.jsx)(b.ArrowRight,{className:"h-4 w-4 ml-2"})]}):(0,s.jsxs)(d.Button,{onClick:eS,disabled:J,children:[J?"Creating...":"Create Zone",(0,s.jsx)(f.Check,{className:"h-4 w-4 ml-2"})]})]})]})})]})})]})]})}}]);